(this.webpackJsonppruebas=this.webpackJsonppruebas||[]).push([[1],{102:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(40),o=n.n(c),s=n(20),i=n(1),u=n(79),l=n(3),j=n.n(l),b=n(5),d=n(4),p=n(30),h=(n(102),n(28)),f=n(10),O=n(12),x=n(11),m=n.n(x);function g(){var e=localStorage.getItem("@Storage:recordarUsuario");if(null!=e){var t="true"==e;return t?{pass:localStorage.getItem("@Storage:contraseniaX"),user:localStorage.getItem("@Storage:usuario"),remember:t}:(localStorage.removeItem("@Storage:contraseniaX"),localStorage.removeItem('"@Storage:usuario"'),{pass:"",user:"",remember:t})}return{pass:"",user:"",remember:!1}}function v(e){e.recordar?localStorage.setItem("@Storage:contraseniaX",e.contrasenia):localStorage.removeItem("@Storage:contraseniaX"),localStorage.setItem("@Storage:usuario",e.usuario),localStorage.setItem("@Storage:idUsuario",String(e.idUsuario)),localStorage.setItem("@Storage:cliente",String(e.cliente)),localStorage.setItem("@Storage::userToken",e.token),localStorage.setItem("@Storage:recordarUsuario",String(e.recordar)),localStorage.setItem("@Storage:userName",e.userName),console.log(e.userName)}function S(){return localStorage.getItem("@Storage:usuario")}function C(){return{cliente:localStorage.getItem("@Storage:cliente"),idUsuario:localStorage.getItem("@Storage:idUsuario"),token:localStorage.getItem("@Storage::userToken")}}function y(e){localStorage.setItem("@Storage:contratos",e)}function k(e,t,n,r){return localStorage.setItem("@Storage:idLectura",e),localStorage.setItem("@Storage:nContribuyente",t),localStorage.setItem("@Storage:contratoVigente",n),localStorage.setItem("@Storage:medidor",r),!0}function w(){return{idLectura:localStorage.getItem("@Storage:idLectura"),contribuyente:localStorage.getItem("@Storage:nContribuyente"),contratoVigente:localStorage.getItem("@Storage:contratoVigente"),medidor:localStorage.getItem("@Storage:medidor"),nCliente:localStorage.getItem("@Storage:cliente"),token:localStorage.getItem("@Storage::userToken"),idUsuario:localStorage.getItem("@Storage:idUsuario")}}function M(){return{idLectura:localStorage.getItem("@Storage:editarIdLectura"),contrato:localStorage.getItem("@Storage:editarContratoVigente"),contribuyente:localStorage.getItem("@Storage:editarNContribuyente"),medidor:localStorage.getItem("@Storage:editarMedidor")}}function I(){return{datosLectura:{idConsulta:localStorage.getItem("@Storage:editarIdLectura"),nCliente:localStorage.getItem("@Storage:cliente")},token:localStorage.getItem("@Storage::userToken")}}function A(){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"false"==localStorage.getItem("@Storage:recordarUsuario")?(localStorage.removeItem("@Storage:usuario"),localStorage.removeItem("@Storage:idUsuario"),localStorage.removeItem("@Storage:cliente"),localStorage.removeItem("@Storage::userToken"),localStorage.removeItem("@Storage:contraseniaX")):(localStorage.removeItem("@Storage:idUsuario"),localStorage.removeItem("@Storage:cliente"),localStorage.removeItem("@Storage::userToken")),e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return null!=localStorage.getItem("@Storage::userToken")}function D(e){localStorage.setItem("@Storage:serched",String(e))}function z(e){localStorage.setItem("@Storage:cursor",String(e))}function L(){var e=localStorage.getItem("@Storage:cursor"),t=Number(e);return isNaN(t)?0:t}function P(e){localStorage.setItem("@Storage:pages",String(e))}function F(){var e=localStorage.getItem("@Storage:pages"),t=Number(e);return isNaN(t)?0:t}function R(){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem("@Storage:logoCliente"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return U.apply(this,arguments)}function U(){return(U=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("@Storage:logoCliente",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){localStorage.setItem("@Storage:clienteNombreCorto",e)}function _(){return localStorage.getItem("@Storage:clienteNombreCorto")}function q(e){localStorage.setItem("@Storage:idContribuyente",e)}function V(){return localStorage.getItem("@Storage:idContribuyente")}function G(){localStorage.removeItem("@Storage:idSector"),localStorage.removeItem("@Storage:cursor"),localStorage.removeItem("@Storage:pages"),localStorage.removeItem("@Storage:lecturaDesde"),localStorage.removeItem("@Storage:lecturaHasta"),localStorage.removeItem("@Storage:reporteDesde"),localStorage.removeItem("@Storage:reporteHasta")}function H(e){console.log(e),localStorage.setItem("@Storage:punteroBusqueda",String(e))}function J(){var e=localStorage.getItem("@Storage:punteroBusqueda"),t=Number(e);return isNaN(t)?0:t}function K(){var e=localStorage.getItem("@Storage:paginasBusqueda"),t=Number(e);return isNaN(t)?0:t}function W(e){localStorage.setItem("@Storage:CuentasPapas",String(e))}function X(){return null!=localStorage.getItem("@Storage:CuentasPapas")?localStorage.getItem("@Storage:CuentasPapas"):""}function Z(e){localStorage.setItem("@Storage:ContratoCorte",e)}function $(){return null!=localStorage.getItem("@Storage:ContratoCorte")?localStorage.getItem("@Storage:ContratoCorte"):""}function Q(){return null!=localStorage.getItem("@Storage:idUsuario")?localStorage.getItem("@Storage:idUsuario"):0}var ee=new(function(){function e(){Object(f.a)(this,e)}return Object(O.a)(e,[{key:"getAuth",value:function(e){return m.a.post("https://api.servicioenlinea.mx/api-movil/login-presidentePrueba",e)}},{key:"verificarUsuarioLecturista",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/verificarUsuarioLecturistaPrueba",e,{headers:n})}},{key:"buscarSectores",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/buscarSectores",e,{headers:n})}},{key:"buscarLecturasPorSector",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/datosLecturaPorSector",e,{headers:n})}},{key:"extraesDatosLectura",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/extrarDatosLecturaPrueba",e,{headers:n})}},{key:"guardarDatosLectura",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/guardarDatosLecturaPrueba",e,{headers:n})}},{key:"extraerHistorial",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/extraerHistorialPrueba",e,{headers:n})}},{key:"extraerDatoseditar",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/extraerDatosEditarPrueba",e,{headers:n})}},{key:"actualizarDatosLectura",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/actualizarRegistroPrueba",e,{headers:n})}},{key:"crearReporte",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/crearReportePrueba",e,{headers:n})}},{key:"extraerHistorialReportes",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/listaReportes",e,{headers:n})}},{key:"extraerReporte",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/extraerReporte",e,{headers:n})}},{key:"extraerContribuyente",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/datosLecturaAguaPrueba",e,{headers:n})}},{key:"extraerNumeroItems",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/paginas",e,{headers:n})}},{key:"extraerPromedioContribuyente",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/obtenerConsumoPromedio",e,{headers:n})}},{key:"obtenerLogoCliente",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/extraerLogo",e,{headers:n})}},{key:"extraerContactoContribuyente",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/extraerContribuyente",e,{headers:n})}},{key:"guardarContribuyente",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/guardarContribuyente",e,{headers:n})}},{key:"extraerNumeroItemsBusqueda",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/paginasBusqueda",e,{headers:n})}},{key:"obtenerContribuyenteInspeccion",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/inspeccionContribuyente",e,{headers:n})}},{key:"obtenerDatosContribuyentePorPadron",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/obtenerPadronContribyenteDatos",e,{headers:n})}},{key:"obtenerDatosSectorPalabraClave",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/buscarSectorPalabraClave",e,{headers:n})}},{key:"obtenerNumeroItemsBusquedaSector",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/paginasBusqueaSector",e,{headers:n})}},{key:"obtenerPromedioEditar",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/ObtenerPromedioEditar",e,{headers:n})}},{key:"buscarPorContrato",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/buscarPorContrato",e,{headers:n})}},{key:"buscarPorMedidor",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/buscarPorMedidor",e,{headers:n})}},{key:"capturarCoutaFija",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/consumo",e,{headers:n})}},{key:"obtenerDatosContratoCorte",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/DatosTomaCorte",e,{headers:n})}},{key:"realizarCorteTomaSuinpac",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/RealizarCorte",e,{headers:n})}},{key:"listarCortesUsuario",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/listaCortes",e,{headers:n})}},{key:"buscarContratoReporte",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/AppAgua/ReporteBuscarContrato",e,{headers:n})}},{key:"realizarReporteContrato",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/AppAgua/crearReporteV2",e,{headers:n})}},{key:"realizarReporteMedidor",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/AppAgua/ReporteBuscarMedidor",e,{headers:n})}},{key:"obtenerConfiguracion",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/AppAgua/ConfiguracionCoutaFija",e,{headers:n})}},{key:"obtenerConfiguracionFotografia",value:function(e,t){var n={"Content-type":"application/json",Authorization:"Bearer"+t};return m.a.post("https://api.servicioenlinea.mx/api-movil/AppAgua/ConfiguracionEvidencia",e,{headers:n})}}]),e}()),te=new Date,ne=new Error("Error al intentar comunicarse con la API. Verifique que su dispositivo se encuentre conectado a la red"),re=new Error("Sesion no valida"),ae=new Error("Usuario y/o contrase\xf1a incorrectos"),ce=new Error("No puedes iniciar sesi\xf3n con este usuario"),oe=new Error("Consulte con su administrador que el c\xf3digo de lecturas de agua se encuentre en el rango de 1-3"),se=new Error("No se encontraron registros"),ie=new Error("No se ha calculado el consumo"),ue=new Error("La lectura actual no puede ser menor a la anterior"),le=new Error("Aun no puedes realizar registros para el mes seleccionado"),je=new Error("El mes seleccionado ya fue registrado"),be=new Error("Aun no puedes realizar registros para este a\xf1o"),de=new Error("Ya no puedes realizar registros para este a\xf1o"),pe=new Error("este mes ya fue registrado"),he=new Error("Revisa que los campos esten rellenados de forma correcta"),fe=new Error("Error del servidor"),Oe=(new Error("El mes seleccionada debe se mayor a la actual"),new Error("El mes de la lectura debe ser menor al actual"),new Error("Para poder hacer uso de todas las funciones de la aplicaci\xf2n por favor acepta los permisos solicitados por la misma"),new Error("Error al obtener los datos del contrato 403")),xe=new Error("Corte realizado\nHubo un error al subir las imagenes"),me=new Error("Error al insertar el registro");function ge(e,t,n){return ve.apply(this,arguments)}function ve(){return(ve=Object(b.a)(j.a.mark((function e(t,n,r){var a,c,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={usuario:t,passwd:n},e.prev=1,e.next=4,ee.getAuth(a);case 4:if(c=e.sent,1!=c.data.Status){e.next=19;break}return o={usuario:t,cliente:c.data.cliente,idUsuario:c.data.idUsuario,token:c.data.token,recordar:r,contrasenia:n,userName:c.data.datosUsuario.NombreCompleto},console.log(o.token),e.next=11,Se(o);case 11:if(!0!==(s=e.sent)){e.next=16;break}return e.abrupt("return",s);case 16:throw s;case 17:e.next=20;break;case 19:throw ae;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(1),rt(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}function Se(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"-1"!==(n={usuario:t.idUsuario,cliente:t.cliente}).cliente){e.next=4;break}throw ce;case 4:return e.next=6,ee.verificarUsuarioLecturista(n,t.token);case 6:if(r=e.sent,!r.data.Status){e.next=13;break}return v(t),e.abrupt("return",!0);case 13:throw ce;case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),rt(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function ye(){return ke.apply(this,arguments)}function ke(){return(ke=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C(),n={nCliente:t.cliente,idUsuario:t.idUsuario},e.next=5,ee.buscarSectores(n,t.token+"");case 5:return r=e.sent,e.abrupt("return",r.data.Sectores);case 9:throw e.prev=9,e.t0=e.catch(0),rt(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function we(){return Me.apply(this,arguments)}function Me(){return(Me=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C(),n=t.cliente,r=t.token,a={Cliente:n},e.next=5,ee.obtenerConfiguracionFotografia(a,String(r));case 5:if(c=e.sent,0!==(o=c.data.Mensaje).length&&"No se encontraron registros"!==o){e.next=11;break}throw se;case 11:return e.abrupt("return",o);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),rt(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function Ie(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(b.a)(j.a.mark((function e(t){var n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r={nCliente:n.cliente,idLectura:t},e.next=5,ee.extraesDatosLectura(r,n.token+"");case 5:if(a=e.sent,console.log(a),"1"==(c=a.data.ValorLectura[0].Valor)||"2"==c||"3"==c){e.next=12;break}throw oe;case 12:return e.abrupt("return",a.data);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),rt(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function Ne(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,De(t);case 3:if(n=e.sent,console.log(n),!0!==n){e.next=12;break}return e.next=8,Le(t);case 8:return r=e.sent,e.abrupt("return",r);case 12:throw n;case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),rt(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function De(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s,i,u,l,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=parseInt(t.anomalia),r=t.lectura,a=t.arrayAnios,c=te.getMonth()+2,Number.isInteger(n)||(n=NaN),null!=t.lecturaActual){e.next=7;break}throw ie;case 7:if(o=parseInt(t.consumoFinal),isNaN(n)){e.next=13;break}if(!(o<0)){e.next=11;break}throw ue;case 11:e.next=15;break;case 13:if(!(o<=0)){e.next=15;break}throw ue;case 15:if(3!=r){e.next=30;break}if(s=a[t.indexAnio-1].anio,!(t.comparaMes<t.mesCaptura)){e.next=19;break}throw le;case 19:if(!(t.comparaAnio<s)){e.next=21;break}throw be;case 21:if(!(t.comparaMes>t.mesCaptura)){e.next=23;break}throw je;case 23:if(!(t.comparaAnio>s)){e.next=25;break}throw de;case 25:if(13==c&&(c=1),c!=t.mesLectura){e.next=28;break}throw pe;case 28:e.next=59;break;case 30:if(2!=r){e.next=44;break}if(i=a[t.indexAnio-1].anio,!(t.comparaMes<t.mesCaptura)){e.next=34;break}throw le;case 34:if(!(t.comparaMes>t.mesCaptura)){e.next=36;break}throw je;case 36:if(!(t.comparaAnio<i)){e.next=38;break}throw be;case 38:if(!(t.comparaAnio>i)){e.next=40;break}throw de;case 40:if(!(t.mesCaptura>=t.comparaAnio&&t.anhioCaptura>=t.comparaAnio)){e.next=42;break}throw pe;case 42:e.next=59;break;case 44:if(1!=r){e.next=59;break}if(u=a[t.indexAnio-1].anio,!(t.mesCaptura>t.comparaMes)){e.next=48;break}throw le;case 48:if(!(u>t.comparaAnio)){e.next=50;break}throw be;case 50:if(!(t.mesCaptura<t.comparaMes)){e.next=52;break}throw je;case 52:if(!(u<t.comparaAnio)){e.next=54;break}throw de;case 54:if(l=te.getMonth()+2,b=te.getFullYear(),13==l&&(l=1,b=te.getFullYear()+1),l!=t.mesCaptura||b!=t.comparaAnio){e.next=59;break}throw le;case 59:return e.abrupt("return",!0);case 60:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(b.a)(j.a.mark((function e(t){var n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={idToma:t.idToma,cliente:t.nCliente,lecturaAnterior:t.lecturaAnterior,lecturaActual:t.lecturaActual,consumoFinal:t.consumoFinal,mesCaptura:t.mesCaptura,anhioCaptura:t.anhioCaptura,fechaCaptura:t.fechaCaptura,anomalia:t.anomalia,idUsuario:t.idUsuario,latitud:t.Latidude,longitud:t.Longitude,tipoCoordenada:1,fotos:[],arregloFotos:t.arregloFotos,ruta:t.route},e.next=3,ee.guardarDatosLectura(n,t.token);case 3:r=e.sent,console.log(r),a=r.data.Mensaje,c="",e.t0=a,e.next=200===e.t0?10:224===e.t0?12:223===e.t0?14:400===e.t0?15:17;break;case 10:return c="Ok",e.abrupt("break",19);case 12:throw new Error("No se pudo realizar el registro");case 14:throw he;case 15:throw new Error("El mes ya fue capturado");case 17:throw fe;case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(b.a)(j.a.mark((function e(t,n){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=C(),a={idUsuario:r.idUsuario,nCliente:r.cliente,fechaInicioH:t,fechaFinH:n},e.next=5,ee.extraerHistorial(a,r.token+"");case 5:if(!(c=e.sent).data.Status){e.next=10;break}return e.abrupt("return",c.data);case 10:throw se;case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),rt(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Te(){return Be.apply(this,arguments)}function Be(){return(Be=Object(b.a)(j.a.mark((function e(){var t,n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=I(),n=t.datosLectura,null==(r=t.token)){e.next=9;break}return e.next=5,ee.extraerDatoseditar(n,r);case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw null;case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),rt(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Ue(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!_e(t)){e.next=15;break}return n=C(),r={cliente:n.cliente,usuario:n.idUsuario,colonia:t.colonia,calle:t.calle,numero:t.numero,descripcion:t.descripcion,contrato:t.contrato,fallaAdministrativa:t.fallaAdministrativa},e.next=7,ee.crearReporte(r,n.token+"");case 7:if(!(a=e.sent).data.Status){e.next=12;break}return e.abrupt("return",a.data.Mensaje);case 12:throw new Error(a.data.Mensaje);case 13:e.next=16;break;case 15:throw new Error("Los campos que presentan * son obligatorios");case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),rt(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function _e(e){return""!=e.colonia&&""!=e.calle&&""!=e.descripcion}function qe(e,t,n){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(b.a)(j.a.mark((function e(t,n,r){var a,c,o,s,i,u,l,b,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=C(),c=a.token,o=a.cliente,s=te.getMonth()+1,i=te.getFullYear(),u={nCliente:o,datoBusqueda:t,mes:s,a_no:i,Offset:n,sector:r},l=null,"-1"==r){e.next=13;break}return e.next=9,ee.obtenerDatosSectorPalabraClave(u,String(c));case 9:l=e.sent,console.log("Se utiliso el sector: "+r),e.next=16;break;case 13:return e.next=15,ee.extraerContribuyente(u,String(c));case 15:l=e.sent;case 16:if(b=l.data.mensaje,!Array.isArray(b)){e.next=22;break}return e.abrupt("return",b);case 22:throw d=String(b),new Error(d);case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(0),rt(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function Ge(e){return He.apply(this,arguments)}function He(){return(He=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=te.getMonth()+1,a=te.getFullYear(),c={cliente:n.cliente,sector:t,mes:r,anio:a},e.next=7,ee.extraerNumeroItems(c,String(n.token));case 7:if(o=e.sent,!(o.data.Mensaje.length>=1)){e.next=17;break}return s=o.data.Mensaje[0].cantidad,(i=s/20)%1>0&&i++,e.abrupt("return",i);case 17:return e.abrupt("return",0);case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),rt(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function Je(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(b.a)(j.a.mark((function e(t,n){var r,a,c,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=C(),a=te.getMonth()+1,c=te.getFullYear(),o={nCliente:r.cliente,Sector:t,mes:a,a_no:c,Offset:n},e.next=7,ee.buscarLecturasPorSector(o,r.token+"");case 7:if(s=e.sent,i=s.data.mensaje,W(s.data.Papas),y(JSON.stringify(i)),0!==i.legth&&"No se encontraron registros"!==i){e.next=15;break}throw se;case 15:return e.abrupt("return",i);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),rt(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function We(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=w(),n=t.idLectura,r=t.token,a=t.nCliente,c={idLectura:n,nCliente:a},e.next=5,ee.extraerPromedioContribuyente(c,String(r));case 5:return o=e.sent,s=o.data.Mensaje,s=Math.round(s),e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(0),rt(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Ze(){return $e.apply(this,arguments)}function $e(){return($e=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C(),n=t.cliente,r=t.token,a={nCliente:n},e.next=5,ee.obtenerLogoCliente(a,String(r));case 5:c=e.sent,Y(String(c.data.Data)),B(String(c.data.Mensaje)),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),rt(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Qe(){return et.apply(this,arguments)}function et(){return(et=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=w(),n=t.idLectura,r=t.token,a=C(),c=a.cliente,o={nCliente:c,idBusqueda:n},e.next=6,ee.extraerContactoContribuyente(o,String(r));case 6:if(s=e.sent,i=s.data.Mensaje[0],200!=s.data.Code){e.next=17;break}if(!(s.data.Mensaje.length>0)){e.next=13;break}q(i.Contribuyente),e.next=15;break;case 13:throw console.log("Mensaje de prueba"),se;case 15:e.next=17;break;case 17:return e.abrupt("return",i);case 20:throw e.prev=20,e.t0=e.catch(0),rt(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=w(),r=n.nCliente,a=n.token,c=V(),o={cliente:r,id:c,telefono:t.telefono,email:t.email},e.next=6,ee.guardarContribuyente(o,String(a));case 6:return s=e.sent,e.abrupt("return",s.data.Mensaje);case 10:throw e.prev=10,e.t0=e.catch(0),rt(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function rt(e){var t=String(e.message),n=String(e.code),r=e;return t.includes("Network Error")?r=ne:t.includes("400")?r=re:n.includes("ECONNABORTED")&&(r=ne),r}function at(){return ct.apply(this,arguments)}function ct(){return(ct=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.checkPermission(h.a.PERMISSION.CAMERA);case 2:return t=e.sent,e.abrupt("return",t.hasPermission);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return st.apply(this,arguments)}function st(){return(st=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.checkPermission(h.a.PERMISSION.ACCESS_COARSE_LOCATION);case 2:return t=e.sent,e.abrupt("return",t.hasPermission);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return ut.apply(this,arguments)}function ut(){return(ut=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.requestPermissions([h.a.PERMISSION.CAMERA,h.a.PERMISSION.ACCESS_COARSE_LOCATION]);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=w(),r=n.token,a=n.nCliente,c=M(),o={Cliente:a,Padron:t,Lectura:c.idLectura},e.next=6,ee.obtenerPromedioEditar(o,String(r));case 6:return s=e.sent,i=s.data.Mensaje,i=Math.round(i),e.abrupt("return",i);case 12:throw e.prev=12,e.t0=e.catch(0),rt(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function bt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s,i,u,l,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=n.cliente,a=n.token,c=Q(),console.log(c),o=te.getMonth()+1,s=te.getFullYear(),i={Cliente:r,Contrato:t,mes:o,a_no:s,usuario:c},e.next=9,ee.buscarPorContrato(i,String(a));case 9:if(u=e.sent,l=u.data.Mensaje,W(u.data.Papas),!Array.isArray(l)){e.next=17;break}return e.abrupt("return",l);case 17:throw b=String(l),new Error(b);case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(0),rt(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}function pt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s,i,u,l,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=n.cliente,a=n.token,c=te.getMonth()+1,o=te.getFullYear(),s=Q(),i={Cliente:r,Contrato:t,mes:c,a_no:o,usuario:s},e.next=8,ee.buscarPorMedidor(i,String(a));case 8:if(u=e.sent,l=u.data.Mensaje,W(u.data.Papas),console.log(u.data.Papas),!Array.isArray(l)){e.next=17;break}return e.abrupt("return",l);case 17:throw b=String(l),new Error(b);case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(0),rt(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}function ft(e){var t=parseInt(e);if(isNaN(t))throw ie;if(t<0)throw ue;return!0}function Ot(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ft(t.Consumo)){e.next=21;break}return n=C(),r=n.token,e.next=6,ee.capturarCoutaFija(t,String(r));case 6:if(200!=(a=e.sent).data.Code){e.next=11;break}return e.abrupt("return",!0);case 11:if(404!=a.data.Code){e.next=15;break}throw se;case 15:if(423!=a.data.Code){e.next=19;break}throw le;case 19:if(424!=a.data.Code){e.next=21;break}throw je;case 21:e.next=26;break;case 23:throw e.prev=23,e.t0=e.catch(0),rt(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}function mt(){return gt.apply(this,arguments)}function gt(){return(gt=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C(),n=t.cliente,r=t.token,a=$(),c=Q(),o={Padron:a,Cliente:n,Usuario:c},e.next=7,ee.obtenerDatosContratoCorte(o,String(r));case 7:if(s=e.sent,i=[],200!=s.data.code){e.next=16;break}return i.push(s.data.Mensaje[0]),i.push(s.data.Usuario[0]),console.log(i),e.abrupt("return",i);case 16:if(403!=s.data.code){e.next=20;break}throw Oe;case 20:if(404!=s.data.code){e.next=22;break}throw se;case 22:e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(0),rt(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function vt(e){return St.apply(this,arguments)}function St(){return(St=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=n.cliente,a=n.token,c={Cliente:r,Motivo:t.Motivo,Padron:t.Padron,Persona:t.Persona,Usuario:t.Usuario,Estado:t.Estado,Longitud:t.Longitud,Latitud:t.Latitud,Ejercicio:t.Ejercicio,Evidencia:t.Evidencia},e.next=5,ee.realizarCorteTomaSuinpac(c,String(a));case 5:if(200!=(o=e.sent).data.Code){e.next=10;break}return e.abrupt("return","OK");case 10:if(206!=o.data.Code){e.next=14;break}throw xe;case 14:if(400!=o.data.Code){e.next=17;break}throw s=JSON.parse(o.data.Mensaje),new Error("Error ".concat(s.Code,":\n").concat(s.Mensaje));case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(0),rt(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function Ct(e,t){return yt.apply(this,arguments)}function yt(){return(yt=Object(b.a)(j.a.mark((function e(t,n){var r,a,c,o,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=C(),a=r.cliente,c=r.idUsuario,o=r.token,s={Cliente:a,Usuario:c,Ejercicio:n,Mes:t},e.next=5,ee.listarCortesUsuario(s,String(o));case 5:if(200!=(i=e.sent).data.Code){e.next=10;break}return e.abrupt("return",i.data.Mensaje);case 10:if(404!=i.data.Code){e.next=12;break}throw se;case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),rt(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function kt(e){return wt.apply(this,arguments)}function wt(){return(wt=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=n.cliente,a=n.token,c={Cliente:r,Contrato:t},e.next=5,ee.buscarContratoReporte(c,String(a));case 5:if(200!=(o=e.sent).data.Code){e.next=10;break}return e.abrupt("return",o.data.Mensaje);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Mt(e){return It.apply(this,arguments)}function It(){return(It=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=n.cliente,a=n.token,c=n.idUsuario,console.log(a),o={Padron:t.Padron,Cliente:r,Calle:t.Calle,Colonia:t.Colonia,Numero:t.Numero,Descripcion:t.Descripcion,Latitud:t.Latitud,Longitud:t.Longitud,Usuario:c,Fotos:t.Fotos,FallaAdministrativa:t.FallaAdministrativa,Estatus:t.Estatus},e.next=6,ee.realizarReporteContrato(o,String(a));case 6:if(200!=(s=e.sent).data.Mensaje.Code){e.next=11;break}return e.abrupt("return",!0);case 11:if(423!=s.data.Mensaje.Code){e.next=15;break}throw xe;case 15:if(403!=s.data.Mensaje.Code){e.next=17;break}throw me;case 17:return e.abrupt("return",s.data.Mensaje);case 20:throw e.prev=20,e.t0=e.catch(0),rt(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function At(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(),r=n.cliente,a=n.token,c={Cliente:r,Contrato:t},e.next=5,ee.realizarReporteMedidor(c,String(a));case 5:if(o=e.sent,console.log(o.data),200!=o.data.Code){e.next=11;break}return e.abrupt("return",o.data.Mensaje);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),rt(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Et(){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C(),n=t.cliente,r=t.token,a={Cliente:n},e.next=5,ee.obtenerConfiguracion(a,String(r));case 5:return c=e.sent,console.log(c.data),e.abrupt("return",c.data.Configuracion);case 10:throw e.prev=10,e.t0=e.catch(0),rt(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var zt=n(0),Lt=p.d.SplashScreen,Pt=function(){var e=Object(s.e)(),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)(!1),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(""),v=Object(d.a)(m,2),S=v[0],C=v[1],y=Object(r.useState)(!1),k=Object(d.a)(y,2),w=k[0],M=k[1];Object(r.useEffect)((function(){Lt.hide(),N(),I()}),[]),Object(i.Y)(G);var I=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=(t=g()).pass&&null!=t.user&&(c(t.user),p(t.pass),M(t.remember));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==a||""==l||null==a||null==l){t.next=13;break}return t.prev=1,setTimeout((function(){if(O)throw new Error("Tiempo de espera agotado.")}),8e3),t.next=5,ge(a,l,w).then(function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze();case 2:e.replace("./form-datos-toma.page");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){C(e.message)})).finally((function(){x(!1)}));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),C(t.t0.message),x(!1);case 11:t.next=15;break;case 13:x(!1),C("Campos vacios");case 15:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it().then((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(zt.jsxs)(i.A,{children:[Object(zt.jsx)(i.n,{children:Object(zt.jsx)(i.M,{color:"danger",children:Object(zt.jsx)(i.K,{children:"Inicio de sessi\xf3n"})})}),Object(zt.jsxs)(i.k,{fullscreen:!0,children:[Object(zt.jsxs)(i.e,{class:"ion-text-center",className:"box",children:[Object(zt.jsx)(i.p,{src:"../assets/Imagenes/Logo_suinpac.jpeg"}),Object(zt.jsx)(i.r,{className:"input",children:Object(zt.jsx)(i.q,{type:"text",placeholder:"Usuario",onIonChange:function(e){return c(e.detail.value)},value:a})}),Object(zt.jsx)(i.r,{className:"input",children:Object(zt.jsx)(i.q,{type:"password",placeholder:"Contrase\xf1a",onIonChange:function(e){return p(e.detail.value)},value:l})}),Object(zt.jsxs)(i.r,{class:"ion-text-center",children:[Object(zt.jsx)(i.h,{slot:"start",color:"primary",checked:w,onIonChange:function(e){return M(e.detail.checked)}}),Object(zt.jsx)(i.t,{children:"Recordar Usuario y Contrase\xf1a"})]}),Object(zt.jsx)(i.c,{color:"danger",onClick:function(){x(!0),A()},className:"input button",children:"INICIAR SESSI\xd3N"})]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:O,onDidDismiss:function(){return x(!1)},message:"Por favor espere"}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:"ERROR",message:S,isOpen:S.length>0,onDidDismiss:function(){C("")}})]})]})},Ft=(n(121),n(122),n(7)),Rt=function(){var e=Object(s.e)(),t=Object(r.useState)(-1),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),u=Object(d.a)(o,2),l=u[0],p=u[1];Object(r.useEffect)((function(){}),[]);var h=[{title:"Toma de agua",selects:["form-datos-toma.page","datos-contribuyente.page"],icon:Ft.D,path:"/form-datos-toma.page"},{title:"Historial de lecturas",selects:["historial-lecturas.page","editar-lecturas-agua.page"],icon:Ft.u,path:"/historial-lecturas.page"},{title:"Reportes",selects:["ContratosReportes","reportes.page"],path:"/ContratosReportes",icon:Ft.n},{title:"Cortes",selects:["buscar-contrato","realizar-corte"],path:"/buscar-contrato",icon:Ft.o},{title:"Historial Cortes",selects:["buscar-corte"],path:"/buscar-corte",icon:Ft.C},{title:"Salir",selects:["inicio-de-sesion.page"],icon:Ft.q}];Object(r.useEffect)((function(){f(),O()}));var f=function(){var e=window.location.pathname.toString().split("/")[1],t=!1;void 0!=e&&(h.map((function(n,r){n.selects.map((function(n,a){n==e&&(console.log(n),c(r),t=!0)}))})),t||c(0))},O=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=l){e.next=3;break}return e.next=3,R().then((function(e){p(String(e))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(zt.jsxs)("div",{children:[Object(zt.jsx)(i.w,{side:"start",menuId:"first",contentId:"main-content",children:Object(zt.jsxs)(i.k,{children:[Object(zt.jsx)("div",{className:"center",children:""!=l?Object(zt.jsx)(i.p,{src:"data:image/png;base64,"+l}):Object(zt.jsx)(i.H,{className:"spinerItem",color:"danger",name:"lines"})}),Object(zt.jsx)(i.s,{className:"menuLeft"}),Object(zt.jsx)(i.y,{children:h.map((function(t,n){return Object(zt.jsxs)(i.r,{button:!0,className:n==a?"selected":"",onClick:function(){var n;"Salir"==(n=t).title?A().then((function(t){e.replace("/home")})):e.replace(n.path)},children:[Object(zt.jsx)(i.t,{children:t.title}),Object(zt.jsx)(i.o,{slot:"start",ios:t.icon+"-outline",md:t.icon+"-sharp",color:"blue"})]},n)}))}),Object(zt.jsx)(i.s,{})]})}),Object(zt.jsx)(i.D,{id:"main-content"})]})},Tt=function(){var e=Object(s.e)(),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)([]),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)(""),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(""),g=Object(d.a)(m,2),v=g[0],C=g[1],y=Object(r.useState)(!1),w=Object(d.a)(y,2),M=w[0],I=w[1],N=Object(r.useState)([]),R=Object(d.a)(N,2),T=R[0],B=R[1],U=Object(r.useState)(""),Y=Object(d.a)(U,2),q=Y[0],V=Y[1],G=Object(r.useState)(!0),W=Object(d.a)(G,2),Z=W[0],$=(W[1],Object(r.useState)(!1)),Q=Object(d.a)($,2),ee=Q[0],te=Q[1],ne=Object(r.useState)(!1),re=Object(d.a)(ne,2),ae=re[0],ce=re[1],oe=Object(r.useState)("Mensaje"),se=Object(d.a)(oe,2),ie=se[0],ue=se[1],le=Object(r.useState)(!1),je=Object(d.a)(le,2),be=je[0],de=je[1],pe=Object(r.useState)(String),he=Object(d.a)(pe,2),fe=he[0],Oe=he[1],xe=Object(r.useState)(!1),me=Object(d.a)(xe,2),ge=me[0],ve=me[1],Se=Object(r.useState)(Number),Ce=Object(d.a)(Se,2),ke=Ce[0],we=Ce[1],Me=Object(r.useState)(!1),Ie=Object(d.a)(Me,2),Ae=Ie[0],Ne=Ie[1],Ee=Object(r.useState)(String),De=Object(d.a)(Ee,2),ze=De[0],Le=De[1],Pe=Object(r.useState)(!1),Fe=Object(d.a)(Pe,2),Re=Fe[0],Te=Fe[1],Be=Object(r.useState)(1),Ue=Object(d.a)(Be,2),Ye=Ue[0],_e=Ue[1],Ve=Object(r.useState)("Buscar por contrato"),He=Object(d.a)(Ve,2),Ke=He[0],We=He[1],Xe=[{text:"Reintentar",handler:function(){x(""),"sectores"==q?ct():st(v)}},{text:"Cancelar",handle:function(){x("")}}],Ze=Object(r.useState)(!0),$e=Object(d.a)(Ze,2),Qe=$e[0],et=$e[1],tt=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E(),de(!t),ce(!t),e.next=5,_();case 5:n=e.sent,Le(String(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){tt()}),[]),Object(r.useEffect)((function(){be?nt(be):rt()}),[be]);var nt=function(t){t&&(ue("Sesi\xf3n no valida"),x("Inicie sesi\xf3n por favor\nRegresando..."),te(!0),setTimeout(Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ue("Error"),x(""),t.next=4,A().then((function(t){e.replace("/home")}));case 4:case"end":return t.stop()}}),t)}))),2500))},rt=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it().then(function(){var t=Object(b.a)(j.a.mark((function t(n){var r,a,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at();case 2:return r=t.sent,t.next=5,ot();case 5:a=t.sent,r&&a?(o=S(),c(o+""),ct()):(te(!0),x("Debe otorgar permisos para usar la aplicaci\xf3n"),ce(!0),setTimeout((function(){e.replace("/home")}),2500));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){var e=S();c(e+""),ct()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ct=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye().then((function(e){return p(e)})).catch((function(e){var t=String(e.message).includes("Sesion no valida");de(t),C(""),t||(x(e.message),V("sectores"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.Y)((function(){et(!0)})),Object(i.Z)((function(){et(!1)}));var st=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(!1),I(!0),e.next=4,Ge(t).then((function(e){console.log(e),P(parseInt(e+"")),we(parseInt(e+"")),z(0)}));case 4:return e.next=6,Je(t,0).then((function(e){Ne(!0),B(e),ve(!1),z(0)})).catch((function(e){B([]);var t=String(e.message).includes("Sesion no valida");de(t),t||(te(!0),V("Mensaje"),x(e.message))})).finally((function(){I(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var t=Object(b.a)(j.a.mark((function t(n,r,a,c,o,s){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=9;break}if(1==o){t.next=7;break}D(ge),!0===k(n,r,a,c)&&(e.push("/captura-de-lectura.page"),te(!0)),t.next=9;break;case 7:return t.next=9,Et().then((function(t){"1"==t?!0===k(n,r,a,c)&&(e.push("/captura-de-lectura.page"),te(!0)):(te(!0),ue("Mensaje"),x("Temporalmente deshabilitado"))})).catch((function(e){}));case 9:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,o){return t.apply(this,arguments)}}(),lt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(!1),I(!0),e.next=4,Je(n,t).then((function(e){B(e),ve(!1)})).catch((function(e){console.log(e),B([]);var t=String(e.message).includes("Sesion no valida");de(t),t||(te(!0),V("Mensaje"),x(e.message))})).finally((function(){I(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jt=function(e){C(e),function(e){localStorage.setItem("@Storage:idSector",e)}(e),st(e)},dt=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(!0),e.next=3,qe(fe,t,"-1").then((function(e){ve(!0),B(e)})).catch((function(e){var t=String(e.message);t.includes("Sesion no valida")?de(!0):(te(!0),ue("Mensaje"),x(t))})).finally((function(){I(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(!0),B([]),Ne(!1),I(!0),console.log(Ot(fe)),e.next=7,bt(Ot(fe)).then((function(e){B(e)})).catch((function(e){B([]);var t=String(e.message).includes("Sesion no valida");de(t),t||(te(!0),V("Mensaje"),x(e.message))})).finally((function(){I(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ft=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(!0),B([]),Ne(!1),I(!0),console.log(Ot(fe,10)),e.next=7,pt(Ot(fe,10)).then((function(e){B(e)})).catch((function(e){B([]);var t=String(e.message).includes("Sesion no valida");de(t),t||(te(!0),V("Mensaje"),x(e.message))})).finally((function(){I(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ot(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;e.length<t;)e="0"+e;return e}return Object(zt.jsxs)(i.A,{children:[Qe?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"".concat(a," - ").concat(ze)}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{class:"ion-text-center",className:"box",children:[Object(zt.jsxs)(i.g,{children:[Object(zt.jsxs)("div",{children:[Object(zt.jsx)("h3",{children:"Lectura de agua potable"}),Object(zt.jsx)(i.t,{children:"Puedes realizar busquedas por:"}),Object(zt.jsx)("p",{children:"Contrato y Medidor"}),Object(zt.jsx)("br",{})]}),Object(zt.jsxs)(i.m,{children:[Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{children:Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Filtrar Por:"}),Object(zt.jsxs)(i.F,{onIonCancel:function(){_e(1)},value:Ye,placeholder:"Seleccione el filtro",interface:"action-sheet",onIonChange:function(e){var t;t=parseInt(e.detail.value+""),_e(t),1==Ye&&We("Buscar por Medidor"),2==Ye&&We("Buscar por Contrato")},children:[Object(zt.jsx)(i.G,{value:1,children:"Contrato"}),Object(zt.jsx)(i.G,{value:2,children:"Medidor"})]})]})})}),Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"9",children:Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.q,{type:"number",placeholder:Ke,onIonChange:function(e){var t;t=String(e.detail.value),Oe(t)}})})}),Object(zt.jsx)(i.j,{size:"2",class:"btnSerch",children:Object(zt.jsx)(i.c,{color:"danger",size:"large",shape:"round",onClick:function(){1==Ye&&ht(),2==Ye&&ft()},children:Object(zt.jsx)(i.o,{icon:Ft.z,color:"light",size:"large"})})})]}),Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.t,{className:"center",color:"",children:"o seleccione un sector"})})]}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Sectores"}),Object(zt.jsx)(i.F,{placeholder:"Seleccionar uno",onIonChange:function(e){jt(e.detail.value)},interface:"action-sheet",disabled:ae,cancelText:"Cancelar",value:v,children:null!=l?l.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:e.Sector},t)})):Object(zt.jsx)(i.G,{disabled:!0,children:"Sin Sectores"})})]})]}),Object(zt.jsxs)(i.f,{children:[Object(zt.jsx)(i.s,{children:Ae?Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"2",children:Object(zt.jsx)(i.c,{shape:"round",color:"danger",size:"small",onClick:Re?function(){I(!0);var e=J();e-1<0?H(e=K()-1):(H(e-1),e--);var t=20*e;console.log(t,fe),dt(t)}:function(){var e=L();e-1<0?z(e=F()-1):(z(e-1),e--);F();lt(20*e,v)},children:Object(zt.jsx)(i.o,{icon:Ft.a,size:"small"})})}),Object(zt.jsx)(i.j,{size:"8",children:Object(zt.jsxs)(i.t,{children:["Resultados: Pagina ",Re?J()+1:L()+1," de ",ke]})}),Object(zt.jsx)(i.j,{size:"2",children:Object(zt.jsx)(i.c,{shape:"round",color:"danger",onClick:Re?function(){I(!0);var e=J();H(e+1);var t=0;++e>=K()?(H(0),t=20*(e=0)):t=20*e,console.log(t,fe),dt(t)}:function(){I(!0);var e=L();z(e+1);var t=0;++e>=F()?(z(0),t=20*(e=0)):t=20*e,console.log(t,v),lt(t,v)},children:Object(zt.jsx)(i.o,{icon:Ft.c,size:"small"})})})]})}):Object(zt.jsx)(i.t,{className:"center",class:"ion-text-center",children:"Mostrando Resultados"})}),Object(zt.jsx)(i.u,{children:T.map((function(e,t){var n=X(),r=function(e,t){var n="",r=["",!1];switch(1==t&&(n="Cuota Fija "),e){case 1:case 2:r=[n+"",1==t];break;case 3:r=[n+"Baja Temporal",!0];break;case 4:r=[n+"Baja Permanente",!0];break;case 5:r=[n+"Inactivo",!0];break;case 6:r=[n+"Nueva",!0];break;case 9:r=[n+"Sin Toma",!0];break;case 10:r=[n+"Multada",!0]}return r}(parseInt(e.Estatus),parseInt(e.M_etodoCobro)),a=String(n).includes(e.id);return a&&(r[0]+="Desarrollo"),Object(zt.jsx)("div",{className:a||r[1]?"cuotaFija":"",onClick:function(){ut(e.id,e.Contribuyente,e.ContratoVigente,e.Medidor,e.M_etodoCobro,a)},children:Object(zt.jsx)(i.r,{detail:!0,children:Object(zt.jsxs)(i.u,{children:[Object(zt.jsx)(i.t,{children:e.Contribuyente}),Object(zt.jsxs)("p",{children:["Contrato: ",e.ContratoVigente,", Medidor: ",e.Medidor,", Toma: ",e.Toma,"\xa0\xa0\xa0\xa0",a||r[1]?Object(zt.jsx)(i.z,{style:{fontsize:20},color:"danger",children:r[0]}):""]})]})})},t)}))})]})]}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:ie,message:O,isOpen:O.length>0,backdropDismiss:!1,buttons:ee?[{text:"Aceptar",handler:function(){x("")}}]:Xe}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:M,onDidDismiss:function(){I(!1)},message:"Por favor espere"}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:"ERROR",message:"Para poder hacer uso de todas las funciones de la aplicaci\xf2n por favor acepta los permisos solicitados por la misma",isOpen:!Z})]})]})},Bt=n(22),Ut=(n(123),n(86)),Yt=n(83);function _t(){var e=Object(Ut.a)().getPhoto;return{takePhoto:function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({resultType:p.a.Uri,source:p.b.Camera,quality:50});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}function qt(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Array,new Array,r=[{id:1,mes:"Enero"},{id:2,mes:"Febrero"},{id:3,mes:"Marzo"},{id:4,mes:"Abril"},{id:5,mes:"Mayo"},{id:6,mes:"Junio"},{id:7,mes:"Julio"},{id:8,mes:"Agosto"},{id:9,mes:"Septiembre"},{id:10,mes:"Octubre"},{id:11,mes:"Noviembre"},{id:12,mes:"Diciembre"}],a=Wt(t),n.push({Meses:r}),n.push({Anios:a}),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){return function(e){return Ht.apply(this,arguments)}(e)}function Ht(){return(Ht=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,Jt(r);case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(){var t=r.result;e(t)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){for(var t=new Array,n=e-10,r=e+3,a=1;n<=r;n++)t.push({id:a,anio:n}),a++;return t}function Xt(){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt.a.getCurrentPosition();case 3:return t=e.sent,e.abrupt("return",t.coords);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function $t(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;e.length<t;)e="0"+e;return e}var Qt=function(){var e=Object(s.e)(),t=Object(r.useState)(Object),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(Number),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)(""),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(!1),g=Object(d.a)(m,2),v=g[0],S=g[1],C=Object(r.useState)([]),y=Object(d.a)(C,2),k=y[0],M=y[1],I=Object(r.useState)(Number),A=Object(d.a)(I,2),N=A[0],z=A[1],L=Object(r.useState)(!1),P=Object(d.a)(L,2),F=P[0],R=P[1],T=Object(r.useState)(""),B=Object(d.a)(T,2),U=B[0],Y=B[1],_=Object(r.useState)([]),q=Object(d.a)(_,2),V=q[0],G=q[1],H=Object(r.useState)(-1),J=Object(d.a)(H,2),K=J[0],W=J[1],X=Object(i.V)(),Z=Object(d.a)(X,2),$=Z[0],Q=(Z[1],Object(r.useState)([])),ee=Object(d.a)(Q,2),te=ee[0],ne=ee[1],re=Object(r.useState)([]),ae=Object(d.a)(re,2),ce=ae[0],oe=ae[1],se=Object(r.useState)(""),ie=Object(d.a)(se,2),ue=ie[0],le=ie[1],je=Object(r.useState)(Number),be=Object(d.a)(je,2),de=be[0],pe=be[1],he=Object(r.useState)(Number),fe=Object(d.a)(he,2),Oe=fe[0],xe=fe[1],me=Object(r.useState)(11),ge=Object(d.a)(me,2),ve=ge[0],Se=ge[1],Ce=Object(r.useState)(Number),ye=Object(d.a)(Ce,2),ke=(ye[0],ye[1]),Me=Object(r.useState)([]),Ae=Object(d.a)(Me,2),Ee=Ae[0],De=Ae[1],ze=_t().takePhoto,Le=Object(r.useState)(!1),Pe=Object(d.a)(Le,2),Fe=Pe[0],Re=Pe[1],Te=Object(r.useState)(!1),Be=Object(d.a)(Te,2),Ue=Be[0],Ye=(Be[1],Object(r.useState)(Number)),_e=Object(d.a)(Ye,2),qe=_e[0],Ve=_e[1],Ge=Object(r.useState)(Number),He=Object(d.a)(Ge,2),Je=He[0],Ke=He[1],Xe=Object(r.useState)(Number),Ze=Object(d.a)(Xe,2),$e=Ze[0],Qe=Ze[1],et=Object(r.useState)(Number),tt=Object(d.a)(et,2),nt=tt[0],rt=tt[1],at=Object(r.useState)(Number),ct=Object(d.a)(at,2),ot=(ct[0],ct[1]),st=Object(r.useState)(Number),it=Object(d.a)(st,2),ut=it[0],lt=it[1],jt=Object(r.useState)(!1),bt=Object(d.a)(jt,2),dt=bt[0],pt=bt[1],ht=Object(r.useState)(Number),ft=Object(d.a)(ht,2),xt=ft[0],mt=ft[1],gt=Object(r.useState)(Number),vt=Object(d.a)(gt,2),St=vt[0],Ct=vt[1],yt=Object(r.useState)(!1),kt=Object(d.a)(yt,2),wt=kt[0],Mt=kt[1],It=Object(r.useState)("MENSAJE"),At=Object(d.a)(It,2),Nt=At[0],Et=At[1],Dt=Object(r.useState)(Number),Lt=Object(d.a)(Dt,2),Pt=Lt[0],Tt=Lt[1],Ut=Object(r.useState)(String),Yt=Object(d.a)(Ut,2),Vt=Yt[0],Ht=Yt[1],Jt=Object(r.useState)(String),Kt=Object(d.a)(Jt,2),Zt=Kt[0],$t=Kt[1],Qt=Object(r.useState)(String),en=Object(d.a)(Qt,2),tn=en[0],nn=en[1],rn=Object(r.useState)(String),an=Object(d.a)(rn,2),cn=an[0],on=an[1],sn=Object(r.useState)(!1),un=Object(d.a)(sn,2),ln=un[0],jn=un[1],bn=Object(r.useState)(20),dn=Object(d.a)(bn,2),pn=dn[0],hn=dn[1],fn=Object(r.useState)(!0),On=Object(d.a)(fn,2),xn=On[0],mn=On[1],gn=Object(r.useState)(!1),vn=Object(d.a)(gn,2),Sn=vn[0],Cn=vn[1],yn=[{text:"Reintentar",handler:function(){x(""),Et("Error"),wn()}},{text:"Cancelar"}],kn=new Date,wn=function(){var e=E();Mn(e)};Object(r.useEffect)((function(){wn()}),[dt]),Object(r.useEffect)((function(){dt&&z(0)}),[xt]),Object(r.useEffect)((function(){console.log(Pt)}),[Pt]);var Mn=function(t){t?(S(!0),In(),mt(0)):(Et("Sesi\xf3n no valida"),x("Inicie sesi\xf3n por favor\nRegresando..."),setTimeout((function(){Et("ERROR"),x(""),e.replace("/home")}),2500))};Object(i.Y)((function(){mn(!1)})),Object(i.W)((function(){mn(!0)}));var In=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"null"==(t=w()).contribuyente&&(t.contribuyente=""),c(t),An(t.idLectura),pt(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),An=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we().then((function(e){R("1"==e)}));case 2:return e.next=4,We().then(function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseFloat(n).toFixed(2),Tt(parseInt(String(n))),console.log(n),e.next=5,Ie(t).then((function(e){if(Cn("1"==e.Mensaje[0].M_etodoCobro),300!=e.Mensaje){Ht(e.Mensaje[0].Toma),$t(e.Mensaje[0].Municipio),nn(e.Mensaje[0].Localidad),on(e.Mensaje[0].Direccion);var t=parseInt(e.Mensaje[0].A_no),n=parseInt(e.Mensaje[0].Mes);t=isNaN(t)?kn.getFullYear():t,n=isNaN(n)?kn.getMonth():n,lt(n),ke(t),Nn(t,e.ValorLectura[0].Valor,n),p(null!=e.Mensaje[0].LecturaActual?parseInt(e.Mensaje[0].LecturaActual):0)}else Nn(kn.getFullYear(),"1",kn.getMonth());Re(1==e.BloquearCampos[0].Valor),M(e.Anomalias),ot(e.ValorLectura[0].Valor),z(0)})).catch((function(e){console.log("aqui esta el error"),(e.message+"").includes("API")&&Mt(!0),x(e.message)})).finally((function(){S(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){})).finally((function(){S(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nn=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(kn.getMonth().toString()),e.next=3,qt(t).then((function(e){switch(le(e[0].Meses[a].mes),pe(e[0].Meses[a].id),oe(e[0].Meses),De(e[1].Anios),n){case"1":En(t,r,e[0].Meses);break;case"2":Dn(t,e[0].Meses[a].id,e[0].Meses,e[1].Anios);break;case"3":zn(e[0].Meses)}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),En=function(e,t,n){var r=e,a=t+1;Ke(r);var c=function(e){for(var t=new Array,n=(new Date).getFullYear()+1,r=1,a=e;a<=n;a++)t.push({id:r,anio:a}),r++;return t}(e);De(c),13==a&&(r=e+1,a=n[0].id,le(n[0].mes),Ke(e+1)),Ve(a),pe(a),c.map((function(e,t){e.anio==r&&(Se(e.id),xe(e.anio))})),null==l&&p(0)},Dn=function(e,t,n,r){var a=kn.getFullYear(),c=kn.getMonth();n.map((function(e,t){e.id==c&&(pe(e.id),le(e.mes))})),Ve(kn.getMonth()),Ke(kn.getFullYear());var o=Wt(a);De(o),o.map((function(e,t){a==e.anio&&(Se(e.id),xe(e.anio))})),null==l&&p(0)},zn=function(e){var t=kn.getMonth()+1;Ve(t);var n=kn.getFullYear(),r=kn.getMonth()+1;13==r&&(n=kn.getFullYear()+1,r=e[0].id,le(e[0].mes),Ke(n),Ve(e[0].id)),xe(n),Ke(n),pe(r);var a=Wt(n);De(a),a.map((function(e,t){e.anio==n&&Se(e.id)})),null==l&&p(0)},Ln=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(!1),Et("Mensaje"),x("Lectura guardada\nRegresado..."),setTimeout((function(){D(!1),e.replace("/form-datos-toma.page")}),2500);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Pn=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),setTimeout((function(){if(v)throw 0}),2e4),0==V.length&&F){e.next=21;break}return t=kn.getMonth()+1,n=kn.getFullYear(),e.next=8,Xt();case 8:if(r=e.sent,c=Un(),console.log(nt),Sn){e.next=18;break}return o={route:n+""+t+"/",lecturaAnterior:l,lecturaActual:ln?l:nt,consumoFinal:c,mesCaptura:de,anhioCaptura:Oe,fechaCaptura:kn,anomalia:0==$e?"":$e,tipoCoordenada:1,arregloFotos:te,comparaMes:qe,comparaAnio:Je,lectura:1,arrayAnios:Ee,indexAnio:ve,mesLectura:ut,nCliente:a.nCliente,token:a.token,idUsuario:a.idUsuario,idToma:a.idLectura,Latidude:String(r.latitude),Longitude:String(r.longitude)},console.log(o),e.next=16,Ne(o).then((function(e){Ln()})).catch((function(e){S(!1),x(e.message)}));case 16:e.next=19;break;case 18:Fn(c,r);case 19:e.next=23;break;case 21:x("Debe capturar almenos 1 foto"),S(!1);case 23:e.next=30;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0),S(!1),x("Tiempo de espera agotado.\n            Aseg\xfarese de activar la ubicaci\xf3n del dispositivo");case 30:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}(),Fn=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={LecturaActual:nt,LecturaAnterior:l,Cliente:a.nCliente,Consumo:t,Anio:Oe,padron:a.idLectura,mes:de,anomalia:0==$e?"":$e,idUsuario:a.idUsuario,Fotos:te,tipoCoordenada:1,Latidude:String(n.latitude),Longitude:String(n.longitude)},console.log(r),e.next=4,Ot(r).then((function(){Ln()})).catch((function(e){S(!1),x(e.message)})).finally((function(){S(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rn=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,ze().then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.length<=2?(S(!0),Tn(t.webPath+"")):(S(!1),x("Solo se permiten 3 fotos como m\xe1ximo"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(e.message+"").includes("denied")&&x("La aplicaci\xf3n no tiene permisos para usar la c\xe1mara")})).finally((function(){S(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tn=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt(t).then((function(e){Y(t),G((function(e){return[].concat(Object(Bt.a)(e),[t])})),W(V.length),ne((function(t){return[].concat(Object(Bt.a)(t),[e])}))})).finally((function(){S(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bn=function(e){var t=Number(e);return isNaN(t)?"00":String(t<=9?"0"+t:t)},Un=function(){var e=0;return 0!=$e?ln?e=Pt<pn?pn:Pt:(N<Pt&&(e=Pt),Pt<pn&&(e=pn),pn<N&&(e=N)):e=N,47==$e&&(e=pn),99==$e&&(e=nt<pn?pn:nt),24==$e&&(e=Pt),40==$e&&(e=nt<pn?pn:nt),z(e),e};return Object(zt.jsxs)(i.A,{children:[xn?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Captura de lectura"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{children:[Object(zt.jsx)(i.g,{className:"headerData",children:Object(zt.jsxs)("div",{className:"datosContribuyete",children:[Object(zt.jsx)("h3",{children:a.contribuyente}),Object(zt.jsxs)("p",{children:["Contrato: ",a.contratoVigente,", \xa0\xa0 Medidor: ","null"==a.medidor?"S/N":a.medidor,", \xa0\xa0 Toma: ",Vt]}),Object(zt.jsxs)("p",{children:["Municipio: ",Zt,", \xa0\xa0 Localidad: ",tn]}),Object(zt.jsx)("p",{children:"Direcci\xf3n: ".concat(cn)}),Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"10"}),Object(zt.jsx)(i.j,{size:"1",children:Object(zt.jsx)(i.i,{color:"danger",onClick:function(){e.push("/datos-contribuyente.page")},children:Object(zt.jsx)(i.o,{icon:Ft.t,className:"btnEditar"})})})]})})]})}),Object(zt.jsxs)(i.f,{children:[Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Lectura anterior:"}),Object(zt.jsx)(i.q,{disabled:!0,className:"disabledInput",children:"".concat(l)})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Lectura actual:"}),Object(zt.jsx)(i.q,{disabled:ln,type:"number",placeholder:"0",value:xt,onIonChange:function(e){!function(e){var t=e-l;rt(e),mt(e),isNaN(t)?z(0):z(t)}(parseFloat(e.detail.value+""))}})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Consumo:"}),Object(zt.jsx)(i.q,{disabled:!0,className:"disabledInput",value:N})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Fecha de lectura:"}),Object(zt.jsx)(i.l,{disabled:!0,displayFormat:"DD/MM/YYYY",min:"2000",max:"2026",value:"".concat(kn)})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Anomal\xeda"}),Object(zt.jsx)(i.F,{interface:"action-sheet",onIonCancel:function(){R(!1),Ct(0),jn(!1)},value:St,onIonChange:function(e){!function(e){Qe(e),Ct(e),z(Pt),jn(0!=e),console.log(xt),k.map((function(t,n){t.id==e&&(R(!0),console.log(t.ActualizarAdelante+" - "+t.ActualizarAtras+" Se activa: "+(0==parseInt(t.ActualizarAdelante)||0==parseInt(t.ActualizarAtras))),1==parseInt(t.ActualizarAdelante)||1==parseInt(t.ActualizarAtras)?(jn(!1),rt(xt)):(jn(!0),rt(xt)),hn(parseInt(t.Minima)),0!=xt&&(console.log("Procesando Consumo"),z(Un())),24==e&&z(Pt))}))}(e.detail.value)},children:k.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:"".concat(e.clave<=10?Bn(e.clave):e.clave," - ").concat(e.descripci_on)},t)}))})]}),Object(zt.jsx)("br",{}),function(){if(F)return Object(zt.jsxs)("div",{children:[Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Adjuntar evidencia (maximo 3 fotos)"}),Object(zt.jsx)(i.o,{icon:Ft.d,className:"iconStyle",onClick:Rn})]}),V.length>0?Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.E,{children:V.map((function(e,t){return Object(zt.jsx)(i.j,{children:Object(zt.jsx)(i.p,{src:e,onClick:function(){!function(e,t){Y(e),W(t)}(e,t)},className:"imgFormat"})},t)}))})}):Object(zt.jsx)(zt.Fragment,{})]})}(),""!=U?Object(zt.jsx)(i.r,{children:Object(zt.jsxs)(i.e,{className:"centrar",children:[Object(zt.jsx)(i.p,{src:U}),Object(zt.jsx)(i.f,{children:Object(zt.jsxs)(i.d,{children:[Object(zt.jsx)(i.c,{color:"secondary",onClick:function(){Y("")},children:"Cerrar"}),Object(zt.jsx)(i.c,{color:"danger",onClick:function(){!function(){var e=new Array,t=new Array;V.map((function(t,n){n!=K&&e.push(t)})),te.map((function(e,n){n!=K&&t.push(e)})),G(e),ne(t),Y(""),$({message:"Se elimino la foto de la lista'",duration:2e3,position:"top",buttons:[{side:"start",icon:Ft.f}]})}()},children:"Eliminar"})]})})]})}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Mes: "}),Object(zt.jsx)(i.F,{interface:"action-sheet",value:de,selectedText:"".concat(ue),disabled:Fe,onIonChange:function(e){return t=e.detail.value,void ce.map((function(e,n){e.id==t&&(pe(e.id),le(e.mes))}));var t},children:ce.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:e.mes},t)}))})]}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"A\xf1o: "}),Object(zt.jsx)(i.F,{interface:"action-sheet",value:ve,selectedText:"".concat(Oe),disabled:Fe,onIonChange:function(e){return t=e.detail.value,void Ee.map((function(e,n){e.id==t&&(xe(e.anio),Se(e.id))}));var t},children:Ee.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:e.anio},t)}))})]}),Object(zt.jsx)("br",{}),Object(zt.jsx)("div",{className:"centrar",children:Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"6",children:Object(zt.jsxs)(i.c,{color:"secondary",onClick:function(){e.replace("/form-datos-toma.page")},children:[Object(zt.jsx)(i.o,{icon:Ft.i,slot:"start"}),"Regresar"]})}),Object(zt.jsx)(i.j,{size:"6",children:Object(zt.jsxs)(i.c,{color:"danger",onClick:Pn,disabled:Ue,children:["Guardar",Object(zt.jsx)(i.o,{icon:Ft.x,slot:"end"})]})})]})})})]})]}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:Nt,message:O,isOpen:O.length>0,backdropDismiss:!1,buttons:wt?yn:[{text:"Aceptar",handler:function(){x("")}}]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:v,onDidDismiss:function(){S(!1)},message:"Por favor espere"})]})]})},en=function(){var e=new Date,t=Object(s.e)(),n=Object(r.useState)(""),a=Object(d.a)(n,2),c=a[0],o=a[1],u=Object(r.useState)(""),l=Object(d.a)(u,2),p=l[0],h=l[1],f=Object(r.useState)(!1),O=Object(d.a)(f,2),x=O[0],m=O[1],g=Object(r.useState)([]),v=Object(d.a)(g,2),S=v[0],C=v[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),w=k[0],M=k[1],I=Object(r.useState)("MENSAJE"),N=Object(d.a)(I,2),D=N[0],z=N[1],L=Object(r.useState)(!1),P=Object(d.a)(L,2),F=P[0],R=P[1],T=Object(r.useState)(!1),B=Object(d.a)(T,2),U=B[0],Y=B[1],_=Object(r.useState)(Boolean),q=Object(d.a)(_,2),V=q[0],G=q[1],H=[{text:"Reintentar",handler:function(){M(""),Y(!1),K(c,p)}},{text:"Cancelar",handler:function(){Y(!1)}}];Object(r.useEffect)((function(){o(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()),h(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()),console.log(c,"\n\n",p),function(){var e=E();G(!e),R(!e)}()}),[]),Object(r.useEffect)((function(){J()}),[V]);Object(i.Y)((function(){var e=null!=localStorage.getItem("@Storage:lecturaDesde")?{desde:localStorage.getItem("@Storage:lecturaDesde"),hasta:localStorage.getItem("@Storage:lecturaHasta")}:null;null!=e&&(o(String(e.desde)),h(String(e.hasta)),K(String(e.desde),String(e.hasta)))}));var J=function(){V&&(z("Sesi\xf3n no valida"),M("Inicie sesi\xf3n por favor\nRegresando..."),setTimeout((function(){A().then((function(e){z("MENSAJE"),M(""),t.replace("/home")}))}),2500))},K=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W(t,n)){e.next=7;break}return m(!0),e.next=5,Fe(t,n).then((function(e){e.Status?(console.log(e.Mensaje),C(e.Mensaje)):(C([]),z("MENSAJE"),M("No se encontraron resultados."))})).catch((function(e){console.log(e);var t=String(e.message);G(t.includes("Sesion no valida")),Y(t.includes("API")),V||(z("ERROR"),M(t))})).finally((function(){m(!1)}));case 5:e.next=9;break;case 7:z("Mensaje"),M("Selecci\xf3n de fechas no validas");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(e,t){return new Date(e)<=new Date(t)},X=function(e){var n,r,a,o,s,i;n=c,r=p,localStorage.setItem("@Storage:lecturaDesde",n),localStorage.setItem("@Storage:lecturaHasta",r),a=e.idLectura,o=e.ContratoVigente,s=e.Contribuyente,i=e.Medidor,localStorage.setItem("@Storage:editarIdLectura",a),localStorage.setItem("@Storage:editarContratoVigente",o),localStorage.setItem("@Storage:editarNContribuyente",s),localStorage.setItem("@Storage:editarMedidor",i),t.replace("/editar-lecturas-agua.page")};return Object(zt.jsx)(i.A,{children:Object(zt.jsxs)(i.k,{children:[Object(zt.jsx)(Rt,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Historial de lecturas"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.e,{children:[Object(zt.jsx)(i.g,{children:Object(zt.jsx)("div",{className:"center",children:Object(zt.jsx)("h5",{children:"Seleccione la fecha"})})}),Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"6",children:Object(zt.jsxs)("div",{className:"center",children:[Object(zt.jsx)("label",{children:"Desde: "}),Object(zt.jsx)(i.l,{disabled:F,value:c,displayFormat:"DD-MM-YYYY",pickerFormat:"DD-MM-YYYY",cancelText:"Cancelar",doneText:"Aceptar",onIonChange:function(e){!function(e){o(e.split("T")[0]),console.log(c)}(e.detail.value+"")},children:c})]})}),Object(zt.jsx)(i.j,{size:"6",children:Object(zt.jsxs)("div",{className:"center",children:[Object(zt.jsx)("label",{children:"Hasta: "}),Object(zt.jsx)(i.l,{disabled:F,value:p,displayFormat:"DD-MM-YYYY",cancelText:"Cancelar",doneText:"Aceptar",onIonChange:function(e){!function(e){h(e.split("T")[0]),console.log(p)}(e.detail.value+"")},children:p})]})})]})})}),Object(zt.jsx)("br",{}),Object(zt.jsx)("div",{className:"center",children:Object(zt.jsx)(i.c,{disabled:F,color:"danger",onClick:function(){K(c,p)},children:"Generar"})})]}),Object(zt.jsx)(i.e,{children:Object(zt.jsx)(i.f,{children:Object(zt.jsx)(i.u,{children:S.map((function(e,t){return Object(zt.jsxs)(i.r,{onClick:function(){X(e)},children:[Object(zt.jsxs)(i.u,{children:[Object(zt.jsx)("h6",{children:e.Fecha}),Object(zt.jsx)("label",{children:e.Contribuyente}),Object(zt.jsx)("br",{}),Object(zt.jsx)("label",{children:"Contrato: ".concat(e.ContratoVigente," , Medidor: ").concat(e.Medidor,", Toma: ").concat(e.Toma)})]}),Object(zt.jsx)("label",{slot:"end",children:Object(zt.jsx)(i.o,{icon:Ft.p,color:"primary"})})]},t)}))})})}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:x,onDidDismiss:function(){m(!1)},message:"Por favor espere"}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:D,message:w,isOpen:w.length>0,backdropDismiss:!1,onDidDismiss:function(){Y(!1)},buttons:U?H:[{text:"Aceptar",handler:function(){M("")}}]})]})})},tn=function(){var e=Object(s.e)(),t=Object(r.useState)(Object),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)([]),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(!0),g=Object(d.a)(m,2),v=g[0],S=g[1],C=Object(r.useState)(Number),y=Object(d.a)(C,2),k=(y[0],y[1]),w=Object(r.useState)(Number),I=Object(d.a)(w,2),N=I[0],D=I[1],z=Object(r.useState)(Number),L=Object(d.a)(z,2),P=L[0],F=L[1],R=Object(r.useState)(Number),T=Object(d.a)(R,2),B=T[0],U=T[1],Y=Object(r.useState)(Number),_=Object(d.a)(Y,2),q=_[0],V=_[1],G=Object(r.useState)(String),H=Object(d.a)(G,2),J=H[0],K=H[1],W=Object(r.useState)([]),X=Object(d.a)(W,2),Z=X[0],$=X[1],Q=Object(r.useState)([]),ee=Object(d.a)(Q,2),te=ee[0],ne=ee[1],re=Object(r.useState)(Number),ae=Object(d.a)(re,2),ce=ae[0],oe=ae[1],se=Object(r.useState)(Number),ie=Object(d.a)(se,2),ue=ie[0],le=ie[1],je=Object(r.useState)(Number),be=Object(d.a)(je,2),de=be[0],pe=be[1],he=Object(r.useState)(Number),fe=Object(d.a)(he,2),Oe=fe[0],xe=fe[1],me=Object(r.useState)(Date),ge=Object(d.a)(me,2),ve=ge[0],Se=ge[1],Ce=Object(r.useState)(String),ye=Object(d.a)(Ce,2),ke=ye[0],we=ye[1],Me=Object(r.useState)(!1),Ie=Object(d.a)(Me,2),Ae=Ie[0],Ne=Ie[1],Ee=Object(r.useState)(!1),De=Object(d.a)(Ee,2),ze=De[0],Le=De[1],Pe=Object(r.useState)(!1),Fe=Object(d.a)(Pe,2),Re=(Fe[0],Fe[1]),Be=Object(r.useState)(!1),Ue=Object(d.a)(Be,2),Ye=Ue[0],_e=Ue[1],qe=Object(r.useState)(String),Ve=Object(d.a)(qe,2),Ge=Ve[0],He=Ve[1],Je=Object(r.useState)(!1),Ke=Object(d.a)(Je,2),We=Ke[0],Xe=Ke[1],Ze=Object(r.useState)(0),$e=Object(d.a)(Ze,2),Qe=$e[0],et=$e[1],tt=Object(r.useState)(Number),nt=Object(d.a)(tt,2),rt=nt[0],at=nt[1],ct=Object(r.useState)(20),ot=Object(d.a)(ct,2),st=ot[0],it=ot[1],ut=Object(r.useState)(Number),jt=Object(d.a)(ut,2),bt=jt[0],dt=jt[1],pt=(new Date,[{text:"Reintentar",handler:function(){K(""),"onLoad"==Ge?ht():gt()}},{text:"Aceptar",handler:function(){He(""),K("")}}]),ht=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),t=M(),c(t),e.next=5,Te().then((function(e){e.Status?(console.log(e.Mensaje),c(e.Mensaje[0]),xt(parseInt(e.Mensaje[0].A_no)),Ot(e)):(we("Mensaje"),K("No se encontraron resultados."))})).catch((function(e){var t=String(e.message);Le(t.includes("API"));var n=t.includes("Sesion no valida");console.log("El toke es valido ?",n),_e(n),n||(He("onLoad"),K(e.message),we("ERROR"))})).finally((function(){p(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){!function(){var e=E();_e(!e),Re(!e)}()}),[N]),Object(r.useEffect)((function(){ft(Ye)}),[Ye]);var ft=function(t){t?(we("Sesi\xf3n no valida"),K("Inicie sesi\xf3n por favor\nRegresando..."),setTimeout(Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return K(""),we("MENSAJE"),t.next=4,A().then((function(t){e.replace("/home")}));case 4:case"end":return t.stop()}}),t)}))),2500)):ht()},Ot=function(){var t=Object(b.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n.tipoLectura[0].Valor),0==n.bloqueoCampos[0].Valor?S(!1):S(!0),k(n.tipoLectura[0].Valor),x(n.Anomalias),1!=(r=n.tipoLectura[0].Valor)&&2!=r&&3!=r){t.next=14;break}return D(n.Mensaje[0].A_no),F(n.Mensaje[0].Mes),U(n.Mensaje[0].A_no),V(n.Mensaje[0].Mes),t.next=12,lt(n.Mensaje[0].Padr_onAgua).then((function(e){at(e)})).catch((function(e){at(0)}));case 12:t.next=17;break;case 14:we("ERROR"),K("Consulte con su administrador que el c\xf3digo de lecturas de agua se encuentre en el rango de 1-3"),setTimeout((function(){e.goBack()}),2e3);case 17:a=n.Mensaje[0],oe(a.Consumo),a.Consumo,le(a.LecturaActual),dt(a.LecturaActual),pe(a.LecturaAnterior),null==a.Observaci_on?xe(0):xe(a.Observaci_on),Se(a.FechaLectura);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),xt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt(t);case 2:n=e.sent,$(n[1].Anios),ne(n[0].Meses);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(e){var t=e-de;le(e),isNaN(t)?oe(0):oe(t)},gt=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),console.log(N,P,a.Padr_onAgua),0==(t=St())?(we("MENSAJE"),K("No se ha calculado el consumo"),p(!1)):t<0?(we("MENSAJE"),K("La lectura actual no puede ser menor a la anterior"),p(!1)):(n={anhioLectura:N,consumo:t,fechaLectura:ve,lecturaActual:ue,lecturaAnterior:de,mesLectura:P,tipoAnomalia:Oe,validarAnhio:B,validarMes:q,idPadron:a.Padr_onAgua},console.log(n),p(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vt=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ae&&(Ne(!1),e.replace("/historial-lecturas.page"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),St=function(){var e=0;return console.log(Qe),0!=Qe?We?e=rt<st?st:rt:(ce<rt&&(e=rt),rt<st&&(e=st),st<ce&&(e=ce)):e=ce<st&&ce>0?st:ce,47==Oe&&(e=st),99==Oe&&(e=ue<st?st:ue),24==Oe&&(e=rt),oe(e),e};return Object(zt.jsxs)(i.A,{children:[Object(zt.jsx)(Rt,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Editar lectura"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{children:[Object(zt.jsx)(i.g,{children:Object(zt.jsxs)("div",{className:"datosContribuyete",children:[Object(zt.jsx)("h3",{children:a.Nombre}),Object(zt.jsxs)("p",{children:["Contrato: ",a.ContratoVigente,", \xa0\xa0 Medidor: ",a.Medidor,", \xa0\xa0 Toma: ",a.Toma]}),Object(zt.jsxs)("p",{children:["Municipio: ",a.Municipio,", \xa0\xa0 Localidad: ",a.Localidad]}),Object(zt.jsxs)("p",{children:["Colonia: ",a.Colonia," \xa0\xa0 Calle: ",a.Calle," \xa0\xa0 Exterior: ",a.Exterior," \xa0\xa0 Interior: ",a.Interior]})]})}),Object(zt.jsxs)(i.f,{children:[Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:" Lectura anterior:"}),Object(zt.jsx)(i.q,{disabled:!0,value:de})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Lectura actual:"}),Object(zt.jsx)(i.q,{disabled:!0,value:ue,onIonChange:function(e){mt(parseFloat(e.detail.value+""))}})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Consumo :"}),Object(zt.jsx)(i.q,{disabled:!0,value:ce})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Fecha de lectura: "}),Object(zt.jsx)(i.l,{disabled:!0,displayFormat:"DD/MM/YYYY",value:ve})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Anomal\xeda:"}),Object(zt.jsxs)(i.F,{disabled:!0,placeholder:"Seleccione uno",interface:"action-sheet",cancelText:"Cancelar",value:Oe,onIonCancel:function(){xe(0),et(0),Xe(!1),mt(ue),le(bt)},onIonChange:function(e){var t;t=e.detail.value,et(t),xe(t),O.map((function(e,n){e.id==t&&(1==parseInt(e.ActualizarAdelante)||1==parseInt(e.ActualizarAtras)?Xe(!1):(Xe(!0),le(de)),it(e.Minima),console.log(e.Minima+"Consumo calculado"),0!=ue&&oe(St()),24==t&&oe(rt))}))},children:[Object(zt.jsx)(i.G,{value:null}),O.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:"".concat(e.clave,"-").concat(e.descripci_on)},t)}))]})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:" Mes: "}),Object(zt.jsx)(i.F,{disabled:v,interface:"action-sheet",placeholder:"Seleccione uno",cancelText:"Cancelar",value:P,onIonChange:function(e){var t;t=e.detail.value,F(parseInt(t))},children:te.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:e.mes},t)}))})]}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"A\xf1o: "}),Object(zt.jsx)(i.F,{disabled:v,interface:"action-sheet",placeholder:"Seleccione uno",cancelText:"Cancelar",value:N,onIonChange:function(e){var t;t=e.detail.value,D(parseInt(t))},children:Z.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.anio,children:e.anio},t)}))})]}),Object(zt.jsx)("br",{}),Object(zt.jsx)("div",{className:"centrar",children:Object(zt.jsx)(i.m,{children:Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{children:Object(zt.jsxs)(i.c,{color:"secondary",onClick:function(){e.replace("/historial-lecturas.page"),console.log("Regresando")},children:["Regresar",Object(zt.jsx)(i.o,{icon:Ft.i,slot:"start"})," "]})})})})})]})]}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:ke,message:J,isOpen:J.length>0,backdropDismiss:!1,buttons:ze?pt:[{text:"Aceptar",handler:function(){K("")}}]}),Object(zt.jsx)(i.L,{isOpen:Ae,onDidDismiss:vt,message:"Los datos se actualizaron correctamente",duration:2e3,position:"top",buttons:[{side:"end",icon:Ft.g,handler:vt}]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:l,onDidDismiss:function(){p(!1)},message:"Por favor espere"})]})]})},nn=(n(124),function(){var e=Object(s.e)(),t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(String),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)(String),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(!1),g=Object(d.a)(m,2),v=(g[0],g[1]),S=Object(r.useState)(!1),C=Object(d.a)(S,2),y=C[0],k=C[1],w=Object(r.useState)(!1),M=Object(d.a)(w,2),I=M[0],N=M[1],D=Object(r.useState)(String),z=Object(d.a)(D,2),L=z[0],P=z[1],F=Object(r.useState)(!1),R=Object(d.a)(F,2),T=R[0],B=(R[1],Object(r.useState)([])),U=Object(d.a)(B,2),Y=U[0],_=U[1],q=Object(r.useState)(""),V=Object(d.a)(q,2),G=V[0],H=V[1],J=Object(r.useState)(Number),K=Object(d.a)(J,2),W=K[0],X=K[1],Z=Object(r.useState)([]),$=Object(d.a)(Z,2),Q=$[0],ee=$[1],te=Object(i.V)(),ne=Object(d.a)(te,2),re=ne[0],ae=(ne[1],Object(r.useState)(!1)),ce=Object(d.a)(ae,2),oe=ce[0],se=ce[1],ie=Object(r.useState)(""),ue=Object(d.a)(ie,2),le=ue[0],je=ue[1],be=Object(r.useState)(String),de=Object(d.a)(be,2),pe=de[0],he=de[1],fe=Object(r.useState)(String),Oe=Object(d.a)(fe,2),xe=Oe[0],me=Oe[1],ge=Object(r.useState)(String),ve=Object(d.a)(ge,2),Se=ve[0],Ce=ve[1],ye=Object(r.useState)(String),ke=Object(d.a)(ye,2),we=ke[0],Me=ke[1],Ie=Object(r.useState)(!1),Ae=Object(d.a)(Ie,2),Ne=Ae[0],Ee=Ae[1],De=_t().takePhoto,ze=[{text:"Reintentar",handler:function(){p(""),Fe()}},{text:"Aceptar",handler:function(){p(""),console.log("Cancelando")}}],Le=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=E(),k(!t),v(!t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.Y)((function(){Ee(!0)})),Object(r.useEffect)((function(){Le()}),[]),Object(r.useEffect)((function(){Pe()}),[y]),Object(r.useEffect)((function(){se(Y.length>0)}),[Y]);var Pe=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y&&(x("Sesi\xf3n no valida"),p("Inicie sesi\xf3n por favor\nRegresando..."),setTimeout((function(){A().then((function(t){p(""),e.replace("/home")}))}),2500));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Fe=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t={colonia:pe,calle:xe,numero:Se,descripcion:we,contrato:L,fallaAdministrativa:T?1:0},e.next=4,Ue(t).then((function(e){N(!1),qe(),x("Mensaje"),p(e)})).catch((function(e){x("ERROR");var t=String(e.message);N(t.includes("API"));var n=t.includes("Sesion no valida");k(n),n?console.log("El token ya expiro"):p(t)})).finally((function(){c(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(e,t){H(e),X(t)},Te=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,De().then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y.length<=2?(c(!0),Be(t.webPath+"")):(c(!1),p("Solo se permiten 3 fotos como m\xe1ximo"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(e.message+"").includes("denied")&&p("La aplicaci\xf3n no tiene permisos para usar la c\xe1mara")})).finally((function(){c(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt(t).then((function(e){H(t),_((function(e){return[].concat(Object(Bt.a)(e),[t])})),X(Y.length),ee((function(t){return[].concat(Object(Bt.a)(t),[e])}))})).finally((function(){c(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!0),!(Q.length>0&&Q.length<4)){e.next=7;break}return t=localStorage.getItem("@Storage:reporteContrato"),e.next=5,Xt().then(function(){var e=Object(b.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={Calle:xe,Colonia:pe,Numero:Se,Descripcion:we,Latitud:String(n.latitude),Longitud:String(n.longitude),FallaAdministrativa:0,Estatus:1,Fotos:Q,Padron:String(t)},e.next=3,Mt(r).then((function(e){qe()})).catch((function(e){x("Mensaje"),p(e.mensaje)})).finally((function(){c(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=10;break;case 7:c(!1),0==Q.length&&(x("Mensaje"),p(" Debes capturar almenos una evidencia "),N(!1)),Q.length>=4&&(x("Mensaje"),p(" Solo se permiten 3 evidencias maximo "),N(!1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";x(e),p(t),je(n)},qe=function(){he(""),me(""),Ce(""),Me(""),P(""),H(""),ee([]),_([]),x("Mensaje"),p("Reporte guardado\nRegresando"),setTimeout((function(){e.goBack()}),1e3)};return Object(zt.jsxs)(i.A,{children:[Object(zt.jsx)(Rt,{}),Ne?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Reportar"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)("div",{style:{paddingLeft:10,paddingRight:10},children:[Object(zt.jsx)("br",{}),Object(zt.jsx)(i.m,{className:"centerInput "+(le.includes("C,")?"errorInput":""),children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"2",className:"centerItems",children:Object(zt.jsx)(i.t,{className:"inputLabel",children:" Colonia: "})}),Object(zt.jsx)(i.j,{size:"10",children:Object(zt.jsx)(i.q,{value:pe,onIonChange:function(e){he(String(e.detail.value))}})})]})}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.m,{className:"centerInput "+(le.includes("Cl,")?"errorInput":""),children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"2",className:"centerItems",children:Object(zt.jsx)(i.t,{className:"inputLabel",children:" Calle: "})}),Object(zt.jsx)(i.j,{size:"10",children:Object(zt.jsx)(i.q,{value:xe,onIonChange:function(e){me(String(e.detail.value))},children:"  "})})]})}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.m,{className:"centerInput "+(le.includes("N,")?"errorInput":""),children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"2",className:"centerItems",children:Object(zt.jsx)(i.t,{className:"inputLabel",children:" Numero: "})}),Object(zt.jsx)(i.j,{size:"10",children:Object(zt.jsx)(i.q,{value:Se,onIonChange:function(e){Ce(String(e.detail.value))},children:"  "})})]})}),Object(zt.jsx)("br",{}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.m,{className:"centerInput "+(le.includes("D,")?"errorInput":""),children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"12",className:"centrado descrip",children:Object(zt.jsx)(i.t,{children:" Descripci\xf3n "})}),Object(zt.jsx)(i.j,{size:"12",children:Object(zt.jsx)(i.J,{value:we,onIonChange:function(e){Me(String(e.detail.value))}})})]})}),Object(zt.jsx)("br",{}),function(){if(oe)return Object(zt.jsxs)("div",{children:[Object(zt.jsx)("br",{}),Y.length>0?Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.E,{children:Y.map((function(e,t){return Object(zt.jsxs)(i.j,{className:"ion-activatable ripple-parent "+(W==t?"selected":""),children:[Object(zt.jsx)(i.p,{src:e,onClick:function(){Re(e,t)},className:"imgFormat"}),Object(zt.jsx)(i.B,{})]},t)}))})}):Object(zt.jsx)(zt.Fragment,{})]})}(),""!=G?Object(zt.jsx)(i.r,{children:Object(zt.jsxs)(i.e,{className:"centrar",children:[Object(zt.jsx)(i.p,{src:G}),Object(zt.jsx)(i.f,{children:Object(zt.jsxs)(i.d,{children:[Object(zt.jsx)(i.c,{color:"secondary",onClick:function(){H("")},children:"Cerrar"}),Object(zt.jsx)(i.c,{color:"danger",onClick:function(){!function(){var e=new Array,t=new Array;Y.map((function(t,n){n!=W&&e.push(t)})),Q.map((function(e,n){n!=W&&t.push(e)})),ee(t),_(e),H(""),re({message:"Se elimino la foto de la lista'",duration:2e3,position:"top",buttons:[{side:"start",icon:Ft.f}]})}()},children:"Eliminar"})]})})]})}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.m,{children:Object(zt.jsx)(i.E,{children:Object(zt.jsxs)(i.j,{size:"12",className:"centrado",children:[Object(zt.jsx)(i.c,{color:"primary",expand:"block",onClick:Te,children:" Evidencia "}),Object(zt.jsx)(i.B,{})]})})}),Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsxs)(i.j,{size:"6",children:[Object(zt.jsx)(i.o,{icon:Ft.i,slot:"start"}),Object(zt.jsx)(i.c,{color:"secondary",expand:"block",onClick:function(){e.goBack()},children:" Regresar "})]}),Object(zt.jsxs)(i.j,{size:"6",children:[Object(zt.jsx)(i.c,{color:"danger",expand:"block",onClick:function(){p("");var e="";0==xe.trim().length&&(e+="Cl,"),0==pe.trim().length&&(e+="C,"),0==Se.trim().length&&(e+="N,"),0==we.trim().length&&(e+="D,"),0==e.length?Ye():_e("Mensaje","Favor de ingresar los campos requeridos",e)},children:" Guardar"}),Object(zt.jsx)(i.o,{icon:Ft.x,slot:"end"})]})]})})]}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:O,message:l,isOpen:l.length>0,backdropDismiss:!1,buttons:I?ze:[{text:"Aceptar",handler:function(){p(""),console.log("Cancelando")}}]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:a,onDidDismiss:function(){c(!1)},message:"Por favor espere"})]})]})}),rn=n(84),an=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),o=Object(d.a)(c,2),u=o[0],l=o[1],p=Object(r.useState)(String),h=Object(d.a)(p,2),f=h[0],O=h[1],x=Object(r.useState)(String),m=Object(d.a)(x,2),g=m[0],v=m[1],C=Object(r.useState)(String),y=Object(d.a)(C,2),k=y[0],w=y[1],M=Object(r.useState)(""),I=Object(d.a)(M,2),N=I[0],D=I[1],z=Object(r.useState)(1),L=Object(d.a)(z,2),P=L[0],F=L[1],R=Object(r.useState)("Buscar por contrato"),T=Object(d.a)(R,2),B=T[0],U=T[1],Y=Object(r.useState)(String),q=Object(d.a)(Y,2),V=q[0],G=q[1],H=Object(r.useState)(!1),J=Object(d.a)(H,2),K=J[0],W=J[1],X=Object(r.useState)(String),Z=Object(d.a)(X,2),$=(Z[0],Z[1]),Q=Object(r.useState)(!1),ee=Object(d.a)(Q,2),te=ee[0],ne=ee[1],re=Object(r.useState)([]),ae=Object(d.a)(re,2),ce=ae[0],oe=ae[1],se=["Activo","Cortado","Baja Temporal","Baja Permanente","Inactivo","Nueva","","","Sin Toma","Multada"],ie=Object(s.e)(),ue=Object(r.useState)(!0),le=(Object(rn.a)(ue),[{text:"Reintentar",handler:function(){w(""),he(V)}},{text:"Cancelar",handle:function(){w("")}}]);Object(i.Y)((function(){a(!0)})),Object(i.X)((function(){a(!1)})),Object(r.useEffect)((function(){je()}),[]),Object(r.useEffect)((function(){u?be(u):de()}),[u]);var je=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!E()),e.t0=O,e.t1=String,e.next=5,_();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(v("Sesi\xf3n no valida"),w("Inicie sesi\xf3n por favor\nRegresando..."),setTimeout(Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v("Error"),w(""),e.next=4,A().then((function(e){ie.replace("/home")}));case 4:case"end":return e.stop()}}),e)}))),2500));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it().then(Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:return t=e.sent,e.next=5,ot();case 5:n=e.sent,t&&n?D(String(S())):(w("Debe otorgar permisos para usar la aplicaci\xf3n"),setTimeout((function(){ie.replace("/home")}),2500));case 7:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(e){var t;t=e.id,localStorage.setItem("@Storage:reporteContrato",t),ne(!0),setTimeout((function(){ne(!1),ie.push("/reportes.page")}),500)},he=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log($t(t)),e.next=3,kt($t(t)).then((function(e){0==e.length&&($("Mensaje"),w("Sin resultados"),W(!1)),oe(e)})).catch((function(e){console.log(e)})).finally((function(){ne(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At($t(t)).then((function(e){0==e.length&&($("Mensaje"),w("Sin resultados"),W(!1)),oe(e)})).catch((function(e){console.log(e.message)})).finally((function(){ne(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0==V.trim().length?(v("Mensaje"),w("Ingrese un contrato o medidor"),W(!0)):(ne(!0),1==P?he(V):fe(V));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(zt.jsxs)(i.A,{children:[n?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"".concat(N," - ").concat(f)}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{class:"ion-text-center",className:"box",children:[Object(zt.jsxs)(i.g,{children:[Object(zt.jsxs)("div",{children:[Object(zt.jsx)("h3",{children:" Buscar contrato "}),Object(zt.jsx)(i.t,{children:"Puedes realizar busquedas por:"}),Object(zt.jsx)("p",{children:"Contrato o Medidor"}),Object(zt.jsx)("br",{})]}),Object(zt.jsxs)(i.m,{children:[Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{children:Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Filtrar Por:"}),Object(zt.jsxs)(i.F,{onIonCancel:function(){F(1)},value:P,placeholder:"Seleccione el filtro",interface:"action-sheet",onIonChange:function(e){var t;t=parseInt(e.detail.value+""),F(t),U(1==t?"Buscar por Medidor":"Buscar por Contrato")},children:[Object(zt.jsx)(i.G,{value:1,children:"Contrato"}),Object(zt.jsx)(i.G,{value:2,children:"Medidor"})]})]})})}),Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{size:"12",children:Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.q,{type:"number",placeholder:B,onIonChange:function(e){G(String(e.detail.value))}})})})}),Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{size:"12",children:Object(zt.jsx)(i.c,{color:"danger",expand:"block",onClick:Oe,children:Object(zt.jsx)(i.o,{icon:Ft.z,color:"light",size:"large"})})})})]})]}),Object(zt.jsx)(i.f,{children:Object(zt.jsx)("div",{style:{flex:1,justifyContent:"center",borderWidth:1,marginTop:5},children:Object(zt.jsx)(i.u,{className:"borderList",children:ce.map((function(e,t){return Object(zt.jsx)(i.r,{onClick:function(){pe(e)},children:Object(zt.jsxs)(i.t,{children:[Object(zt.jsxs)("h2",{children:[" ",e.Contribuyente," "]}),Object(zt.jsxs)("p",{children:[" Contrato: ",e.ContratoVigente,", Toma: ",e.Toma," "]}),Object(zt.jsxs)("p",{children:[" Medidor: ",e.Medidor]}),Object(zt.jsxs)(i.z,{color:"primary",children:["Estado: ",se[e.Estatus-1]]})]})},t)}))})})})]}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:g,message:k,isOpen:k.length>0,backdropDismiss:!1,buttons:K?[{text:"Aceptar",handler:function(){w("")}}]:le}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:te,onDidDismiss:function(){ne(!1)},message:"Por favor espere"})]})]})},cn=(n(125),function(){var e=Object(s.e)(),t=Object(r.useState)(Object),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(String),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)(String),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(String),g=Object(d.a)(m,2),v=g[0],S=g[1],C=Object(r.useState)(String),y=Object(d.a)(C,2),k=y[0],w=y[1],M=Object(r.useState)(!1),I=Object(d.a)(M,2),N=I[0],E=I[1],D=Object(r.useState)(!0),z=Object(d.a)(D,2),L=z[0],P=z[1],F=Object(r.useState)(!1),R=Object(d.a)(F,2),T=R[0],B=R[1],U=Object(r.useState)(String),Y=Object(d.a)(U,2),_=Y[0],q=Y[1];Object(r.useEffect)((function(){H()}),[]),Object(r.useEffect)((function(){G()}),[T]);var V=[{text:"Reintentar",handler:function(){S(""),"onLoad"==_?H():J()}},{text:"Aceptar",handler:function(){S("")}}],G=function(){T&&(w("Session no valida"),S("Inicie sesi\xf3n por favor\nRegresando..."),P(!0),setTimeout(Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A().then((function(t){w("Error"),S(""),e.replace("/home")}));case 2:case"end":return t.stop()}}),t)}))),2500))},H=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,Qe().then((function(e){null!=e?(p(null==e.Celular?"":e.Celular),x(null==e.Email?"":e.Email),c(e)):(w("ERROR"),q("onLoad"),S("No se encontro el contribuyente"))})).catch((function(e){P(!1);var t=String(e.message);t.includes("Sesion no valida")||(w("ERROR"),q("onLoad"),S(t))})).finally((function(){E(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),t={telefono:l,email:O},e.next=4,tt(t).then((function(e){P(!0),w("MENSAJE"),S(e)})).catch((function(e){q("onUpdate");var t=String(e.message),n=t.includes("Sesion no valida"),r=t.includes("API");P(r),n?B(!0):(P(!1),w("Error"),S(e.message))})).finally((function(){E(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(zt.jsx)(i.A,{children:Object(zt.jsxs)(i.k,{fullscreen:!0,children:[Object(zt.jsx)(Rt,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Detalles contribuyente"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.e,{children:[Object(zt.jsx)(i.g,{className:"headerData",children:Object(zt.jsxs)("div",{className:"datosContribuyete",children:[Object(zt.jsx)("h3",{children:a.Nombre}),Object(zt.jsxs)("p",{children:["Contrato: ",a.ContratoVigente,", \xa0\xa0 Medidor: ",a.Medidor,", \xa0\xa0 Toma: ",a.Toma]}),Object(zt.jsxs)("p",{children:["Municipio: ",a.Municipio,", \xa0\xa0 Localidad: ",a.Localidad]}),Object(zt.jsxs)("p",{children:["Colonia: ",a.Colonia," \xa0\xa0 Calle: ",a.Calle," \xa0\xa0 Exterior: ",a.Exterior," \xa0\xa0 Interior: ",a.Interior]})]})}),Object(zt.jsxs)(i.f,{className:"centrar",children:[Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.t,{className:"center",color:"",children:"Datos de contacto"})}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{className:"input",position:"floating",children:"Telefono"}),Object(zt.jsx)(i.q,{type:"tel",placeholder:"Telefono del contribuyente",value:l,onIonChange:function(e){var t;t=String(e.detail.value),p(t)}})]}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{className:"input",position:"floating",children:"Correo Electronico"}),Object(zt.jsx)(i.q,{type:"email",placeholder:"Correo Electronico",value:O,onIonChange:function(e){var t;t=String(e.detail.value),x(t)}})]}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsx)(i.j,{size:"4",children:Object(zt.jsxs)(i.c,{color:"secondary",onClick:function(){console.log("REGRESANDO!!"),e.replace("/captura-de-lectura.page")},children:["Regresar",Object(zt.jsx)(i.o,{icon:Ft.i,slot:"start"})]})}),Object(zt.jsx)(i.j,{size:"4"}),Object(zt.jsx)(i.j,{size:"4",children:Object(zt.jsxs)(i.c,{color:"danger",onClick:J,children:["Guardar",Object(zt.jsx)(i.o,{icon:Ft.y,slot:"end"})]})})]})})]})]}),Object(zt.jsx)(i.a,{isOpen:v.length>0,header:k,message:v,backdropDismiss:!1,buttons:L?["Aceptar"]:V}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:N,message:"Por favor espere",backdropDismiss:!1})]})})}),on=function(){var e=Object(s.e)(),t=Object(r.useState)(!0),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(1),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)("Prueba"),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)("Demo OPD"),g=Object(d.a)(m,2),v=g[0],C=(g[1],Object(r.useState)("")),y=Object(d.a)(C,2),k=y[0],w=y[1],M=Object(r.useState)(!1),I=Object(d.a)(M,2),A=I[0],N=I[1],E=Object(r.useState)([]),D=Object(d.a)(E,2),z=D[0],L=D[1],P=Object(r.useState)("Mensaje"),F=Object(d.a)(P,2),R=F[0],T=F[1],B=Object(r.useState)(""),U=Object(d.a)(B,2),Y=U[0],_=U[1],q=Object(r.useState)(!0),V=Object(d.a)(q,2),G=V[0],H=V[1];Object(r.useEffect)((function(){$()})),Object(i.Y)((function(){c(!1)})),Object(i.W)((function(){c(!0)}));var J=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(W(t)).then((function(e){L(e)})).catch((function(e){String(e.message).includes("Sesion no valida")||(T("Error"),_(e.message))}));case 2:N(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,At(W(t,10)).then((function(e){L(e)})).catch((function(e){var t=String(e.message).includes("Sesion no valida");H(t),t?_(e.message+"\nRegresando..."):(T("Error"),_(e.message))})).finally((function(){N(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;e.length<t;)e="0"+e;return e}var $=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it().then(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Solicitando persmisos"),e.next=3,at();case 3:return n=e.sent,e.next=6,ot();case 6:r=e.sent,n&&r&&(a=S(),x(a+""));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){var e=S();x(e+"")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var t=Object(b.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r||(Z(n.id),e.push("/realizar-corte"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(zt.jsxs)(i.A,{children:[a?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"".concat(O," - ").concat(v)}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{class:"ion-text-center",className:"box",children:[Object(zt.jsxs)(i.g,{children:[Object(zt.jsxs)("div",{children:[Object(zt.jsx)("h3",{children:"Realizar corte"}),Object(zt.jsx)(i.t,{children:"Puedes realizar busquedas por:"}),Object(zt.jsx)("p",{children:"Contrato o Medidor"}),Object(zt.jsx)("br",{})]}),Object(zt.jsxs)(i.m,{children:[Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{children:Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Filtrar Por:"}),Object(zt.jsxs)(i.F,{value:l,onIonCancel:function(){p(1)},placeholder:"Seleccione el filtro",interface:"action-sheet",onIonChange:function(e){p(e.detail.value)},children:[Object(zt.jsx)(i.G,{value:1,children:"Contrato"}),Object(zt.jsx)(i.G,{value:2,children:"Medidor"})]})]})})}),Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{size:"12",children:Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.q,{type:"number",placeholder:"Ingrese el ".concat(1==l?"contrato":"medidor"),onIonChange:function(e){w(String(e.detail.value))}})})})}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.c,{color:"danger",expand:"block",onClick:function(){N(!0),""!=k?1==l?J(k):K(k):N(!1)},children:Object(zt.jsx)(i.o,{icon:Ft.z,color:"light",size:"large"})}),Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.t,{className:"center",color:"",children:"Contrato"})})]})]}),Object(zt.jsx)(i.u,{children:z.map((function(e,t){var n=X(),r=function(e,t){var n="",r=["",!1];switch(1==t&&(n="Cuota Fija "),e){case 1:case 2:r=[n+"",1==t];break;case 3:r=[n+"Baja Temporal",!0];break;case 4:r=[n+"Baja Permanente",!0];break;case 5:r=[n+"Inactivo",!0];break;case 6:r=[n+"Nueva",!0];break;case 9:r=[n+"Sin Toma",!0];break;case 10:r=[n+"Multada",!0]}return r}(parseInt(e.Estatus),parseInt(e.M_etodoCobro)),a=String(n).includes(e.id);return a&&(r[0]+="Desarrollo"),Object(zt.jsx)("div",{className:a||r[1]?"cuotaFija":"",onClick:function(){Q(e,a)},children:Object(zt.jsx)(i.r,{detail:!0,children:Object(zt.jsxs)(i.u,{children:[Object(zt.jsx)(i.t,{children:e.Contribuyente}),Object(zt.jsxs)("p",{children:["Contrato: ",e.ContratoVigente,", Medidor: ",e.Medidor,", Toma: ",e.Toma,"\xa0\xa0\xa0\xa0",a||r[1]?Object(zt.jsx)(i.z,{style:{fontsize:20},color:"danger",children:r[0]}):""]})]})})},t)}))})]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:A,onDidDismiss:function(){N(!1)},message:"Por favor espere"}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:R,message:Y,onDidDismiss:function(){G||e.replace("./home")},isOpen:Y.length>0,backdropDismiss:!1,buttons:[{text:"Aceptar",handler:function(){_("")}}]})]})]})},sn=(n(126),function(){var e=Object(s.e)(),t=Object(r.useState)(!0),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(Object),u=Object(d.a)(o,2),l=u[0],p=u[1],h=Object(r.useState)(Object),f=Object(d.a)(h,2),O=f[0],x=f[1],m=Object(r.useState)(!0),g=Object(d.a)(m,2),v=g[0],S=g[1],C=Object(r.useState)(""),y=Object(d.a)(C,2),k=y[0],w=y[1],M=Object(r.useState)(2),I=Object(d.a)(M,2),A=I[0],N=I[1],E=Object(r.useState)([]),D=Object(d.a)(E,2),z=D[0],L=D[1],P=Object(r.useState)([]),F=Object(d.a)(P,2),R=F[0],T=F[1],B=Object(r.useState)(String),U=Object(d.a)(B,2),Y=U[0],_=U[1],q=Object(r.useState)(Number),V=Object(d.a)(q,2),G=V[0],H=V[1],J=Object(r.useState)(!1),K=Object(d.a)(J,2),W=K[0],X=K[1],Z=_t().takePhoto,$=Object(r.useState)(String),Q=Object(d.a)($,2),ee=Q[0],te=Q[1],ne=Object(r.useState)(2020),re=Object(d.a)(ne,2),ae=re[0],ce=re[1],oe=Object(r.useState)(!0),se=Object(d.a)(oe,2),ie=se[0],ue=se[1],le=Object(r.useState)(String),je=Object(d.a)(le,2),be=je[0],de=je[1],pe=Object(r.useState)(String),he=Object(d.a)(pe,2),fe=he[0],Oe=he[1],xe=Object(r.useState)(!1),me=Object(d.a)(xe,2),ge=me[0],ve=me[1],Se=Object(r.useState)(!1),Ce=Object(d.a)(Se,2),ye=Ce[0],ke=Ce[1],we=Object(i.V)(),Me=Object(d.a)(we,2),Ie=Me[0],Ae=(Me[1],[{text:"Reintentar",handler:function(){Oe(""),de("Error"),S(!0),Ee()}},{text:"Cancelar"}]),Ne=new Date;Object(r.useEffect)((function(){Ee()}),[]),Object(i.Y)((function(){c(!1)})),Object(i.W)((function(){c(!0)}));var Ee=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ne.getDate(),n=Ne.getMonth(),r=Ne.getFullYear(),ce(r),w(De(t,n,r)),e.next=7,mt().then((function(e){void 0!=e&&(console.log(e[1]),p(e[0]),x(e[1]),ue(1!=e[0].Estatus))})).catch((function(e){ve(!0),Oe(e.message),de("ERROR")})).finally((function(){S(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e,t,n){var r="";return r+=e<10?"0"+e+"/":e+"/",r+=t<10?"0"+t+"/":t+"/",r+=n,r},ze=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie){e.next=5;break}return console.log("Abriendo Camara..."),S(!0),e.next=5,Z().then((function(e){Le(String(e.webPath))})).catch((function(e){(e.message+"").includes("denied")&&Oe("La aplicaci\xf3n no tiene permisos para usar la c\xe1mara")})).finally((function(){S(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt(t).then((function(e){_(t),T((function(e){return[].concat(Object(Bt.a)(e),[t])})),H(R.length),L((function(t){return[].concat(Object(Bt.a)(t),[String(e)])})),X(!0)})).catch((function(e){})).finally((function(){S(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(e,t){_(e),H(t)},Fe=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),setTimeout((function(){if(v)throw 0}),2e4),0==z.length){e.next=8;break}return e.next=6,Xt().then(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Motivo:ee,Padron:l.Padron,Persona:O.Persona,Usuario:O.Usuario,Estado:A,Longitud:String(t.longitude),Latitud:String(t.latitude),Ejercicio:ae,Evidencia:z},e.next=3,vt(n).then((function(){ve(!1),de("Mensaje"),Oe("Corte realizado...")})).catch((function(e){ve(!1),Oe(e.message),de("ERROR")})).finally((function(){S(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:de("Mensaje"),Oe("Debe capturar almenos 1 foto"),S(!1);case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),S(!1),de("Mensaje"),Oe("Tiempo de espera agotado.\n            Aseg\xfarese de activar la ubicaci\xf3n del dispositivo");case 19:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==ee){e.next=6;break}return ke(!1),e.next=4,Fe();case 4:e.next=9;break;case 6:de("Mensaje"),Oe("Favor de ingresar el motivo del corte"),ke(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(zt.jsxs)(i.A,{children:[a?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Cortar toma"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{children:[Object(zt.jsx)(i.g,{children:Object(zt.jsxs)("div",{className:"datosContribuyete",children:[Object(zt.jsxs)("h3",{children:[l.Nombre," "]}),Object(zt.jsxs)("p",{children:[" RFC: ",l.Rfc," , Cuenta: ",l.Cuenta]}),Object(zt.jsxs)("p",{children:["Contrato: ",l.ContratoVigente,", \xa0\xa0 Medidor: ",l.Medidor,", \xa0\xa0 Toma: ",l.Toma]}),Object(zt.jsxs)("p",{children:["Municipio: ",l.Municipio,", \xa0\xa0 Localidad: ",l.Localidad]}),Object(zt.jsxs)("p",{children:["Direccion: ",l.Direccion]})]})}),Object(zt.jsxs)(i.f,{children:[Object(zt.jsx)("br",{}),Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.t,{children:"Inspector: ".concat(O.PersonaNombre," - ").concat(O.Puesto," ")})}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.r,{children:Object(zt.jsxs)(i.t,{color:ie?"danger":"primary",className:"bloquearCorte",children:[" "," Estado:  ".concat(["Activo","Cortado","Baja Temporal","Baja Permanente","Inactivo","Nueva","","","Sin toma","Multada"][parseInt(l.Estatus)-1]," ").concat("")," "]})}),Object(zt.jsx)("br",{}),Object(zt.jsx)(i.r,{children:Object(zt.jsxs)(i.t,{children:[" ","Fecha: ".concat(k," ")," "]})}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:" Tipo de inspecci\xf3n "}),Object(zt.jsxs)(i.F,{disabled:!0,interface:"action-sheet",value:A,onIonChange:function(e){N(e.detail.value)},children:[Object(zt.jsx)(i.G,{value:3,children:" Baja Temporal "}),Object(zt.jsx)(i.G,{value:4,children:" Baja Permanente "}),Object(zt.jsx)(i.G,{value:2,children:" Cortado "}),Object(zt.jsx)(i.G,{value:5,children:" Inactivo "}),Object(zt.jsx)(i.G,{value:9,children:" Sin Toma "})]})]}),Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.J,{disabled:ie,placeholder:"Motivo del corte",className:ye?"inputBorderError":"inputBorder",onIonChange:function(e){te(String(e.detail.value))},children:" "})}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.r,{children:[Object(zt.jsx)(i.t,{children:"Adjuntar evidencia (maximo 3 fotos)"}),Object(zt.jsx)(i.o,{icon:Ft.d,className:"iconStyle",onClick:ze})]}),Object(zt.jsx)("br",{}),function(){if(W)return Object(zt.jsx)("div",{children:R.length>0?Object(zt.jsx)(i.r,{children:Object(zt.jsx)(i.E,{children:R.map((function(e,t){return Object(zt.jsxs)(i.j,{className:"ion-activatable ripple-parent "+(G==t?"selected":""),children:[Object(zt.jsx)(i.p,{src:e,onClick:function(){Pe(e,t)},className:"imgFormat"}),Object(zt.jsx)(i.B,{})]},t)}))})}):Object(zt.jsx)(zt.Fragment,{})})}(),Object(zt.jsx)("br",{}),""!=Y?Object(zt.jsx)(i.r,{children:Object(zt.jsxs)(i.e,{className:"centrarCarousel",children:[Object(zt.jsx)(i.p,{src:Y}),Object(zt.jsx)(i.f,{children:Object(zt.jsxs)(i.d,{children:[Object(zt.jsx)(i.c,{color:"secondary",onClick:function(){_("")},children:"Cerrar"}),Object(zt.jsx)(i.c,{color:"danger",onClick:function(){!function(){var e=new Array,t=new Array;z.map((function(t,n){n!=G&&e.push(t)})),R.map((function(e,n){n!=G&&t.push(e)})),T(e),L(t),_(""),Ie({message:"Se elimino la foto de la lista",duration:2e3,position:"top",buttons:[{side:"start",icon:Ft.f}]}),console.log(e.length+" - "+t.length)}()},children:"Eliminar"})]})})]})}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.m,{children:Object(zt.jsxs)(i.E,{children:[Object(zt.jsxs)(i.j,{size:"6",children:[Object(zt.jsx)(i.o,{icon:Ft.i,slot:"start"}),Object(zt.jsx)(i.c,{color:"secondary",onClick:function(){e.replace("/buscar-contrato")},children:"Regresar"})]}),Object(zt.jsx)(i.j,{size:"6",children:Object(zt.jsxs)(i.c,{disabled:ie,color:"danger",onClick:Re,children:["Guardar",Object(zt.jsx)(i.o,{icon:Ft.x,slot:"end"})]})})]})})]})]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:v,onDidDismiss:function(){S(!1)},message:"Por favor espere"}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:be,message:fe,isOpen:fe.length>0,backdropDismiss:!1,buttons:ge?Ae:[{text:"Aceptar",handler:function(){"Corte realizado..."==fe&&(X(!1),_(""),L([]),T([]),H(0),ue(!0),Oe(""),de(""),ke(!1),ve(!1),Ee()),Oe("")}}]})]})]})}),un=(n(127),function(){Object(s.e)();var e=Object(r.useState)(!0),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(String),o=Object(d.a)(c,2),u=(o[0],o[1]),l=Object(r.useState)([]),p=Object(d.a)(l,2),h=p[0],f=p[1],O=Object(r.useState)([]),x=Object(d.a)(O,2),m=x[0],g=x[1],v=Object(r.useState)(11),S=Object(d.a)(v,2),C=S[0],y=S[1],k=Object(r.useState)(Number),w=Object(d.a)(k,2),M=w[0],I=w[1],A=Object(r.useState)([]),N=Object(d.a)(A,2),E=N[0],D=N[1],z=Object(r.useState)(!1),L=Object(d.a)(z,2),P=L[0],F=L[1],R=Object(r.useState)(""),T=Object(d.a)(R,2),B=T[0],U=T[1],Y=Object(r.useState)("Mensaje"),_=Object(d.a)(Y,2),q=_[0],V=_[1],G=new Date,H=["Activo","Cortado","Baja Temporal","Baja Permanente","Inactivo","Nueva","","","Sin toma","Multada"];Object(i.Y)((function(){a(!1)})),Object(i.W)((function(){a(!0)})),Object(r.useEffect)((function(){u(G.getFullYear()+"-"+(G.getMonth()+1)+"-"+(G.getDate()+1)),J(String(G.getFullYear()))}),[]);var J=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt(G.getFullYear());case 2:n=e.sent,g(n[0].Meses),f(n[1].Anios),I(G.getMonth()+1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,Ct(M<=9?"0"+M:String(M),h[C-1].anio).then((function(e){D(e)})).catch((function(e){"No se encontraron registros"==e.message?V("MENSAJE"):V("ERROR"),U(e.message),D([])})).finally((function(){F(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(zt.jsxs)(i.A,{children:[n?Object(zt.jsx)(Rt,{}):Object(zt.jsx)(zt.Fragment,{}),Object(zt.jsx)(i.n,{children:Object(zt.jsxs)(i.M,{color:"danger",children:[Object(zt.jsx)(i.K,{children:"Cortar toma"}),Object(zt.jsx)(i.d,{slot:"start",className:"btnMenu",children:Object(zt.jsx)(i.x,{})})]})}),Object(zt.jsxs)(i.k,{children:[Object(zt.jsxs)(i.e,{children:[Object(zt.jsxs)(i.g,{children:[Object(zt.jsx)(i.K,{className:"center",children:" Historial de cortes "}),Object(zt.jsx)("br",{}),Object(zt.jsxs)(i.E,{className:"bordeFecha",children:[Object(zt.jsx)(i.j,{size:"6",className:"labelCalendario",children:Object(zt.jsx)(i.I,{children:" Seleccione el a\xf1o: "})}),Object(zt.jsx)(i.j,{size:"6",className:"ion-activatable ripple-parent",children:Object(zt.jsxs)("div",{children:[Object(zt.jsx)(i.F,{onIonCancel:function(){y(11)},interface:"action-sheet",value:C,onIonChange:function(e){y(e.detail.value)},children:null!=h?h.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:e.anio},t)})):Object(zt.jsx)(zt.Fragment,{})}),Object(zt.jsx)(i.B,{})]})})]}),Object(zt.jsxs)(i.E,{className:"bordeFecha",children:[Object(zt.jsx)(i.j,{size:"6",class:"labelCalendario",children:Object(zt.jsx)(i.I,{children:" Seleccione mes: "})}),Object(zt.jsx)(i.j,{children:Object(zt.jsx)("div",{children:Object(zt.jsx)(i.F,{onIonCancel:function(){I(G.getMonth()+1)},interface:"action-sheet",value:M,onIonChange:function(e){I(e.detail.value)},children:m.map((function(e,t){return Object(zt.jsx)(i.G,{value:e.id,children:e.mes},e.id)}))})})})]}),Object(zt.jsx)(i.E,{children:Object(zt.jsx)(i.j,{className:"center margintop",children:Object(zt.jsxs)(i.c,{color:"danger",expand:"block",onClick:K,children:[" ",Object(zt.jsx)(i.I,{children:" Buscar Cortes "})," ",Object(zt.jsx)(i.B,{})," "]})})})]}),Object(zt.jsx)(i.f,{children:Object(zt.jsx)("div",{style:{flex:1,justifyContent:"center",borderWidth:1,marginTop:5},children:Object(zt.jsx)(i.u,{className:"borderList",children:E.map((function(e,t){return Object(zt.jsx)(i.r,{children:Object(zt.jsxs)(i.t,{children:[Object(zt.jsxs)("h2",{children:[" ",e.Nombre," "]}),Object(zt.jsxs)("p",{children:[" Contrato: ",e.ContratoVigente,", Fecha: ",e.FechaCorte," "]}),Object(zt.jsxs)("p",{children:[" Motivo: ",e.Motivo," "]}),Object(zt.jsxs)(i.z,{slot:"end",color:2==e.Estatus?"danger":"primary",children:[" ",H[e.Estatus-1]," "]})]})},t)}))})})})]}),Object(zt.jsx)(i.v,{cssClass:"my-custom-class",isOpen:P,onDidDismiss:function(){F(!1)},message:"Por favor espere"}),Object(zt.jsx)(i.a,{cssClass:"my-custom-class",header:q,message:B,isOpen:B.length>0,onDidDismiss:function(){U("")},buttons:[{text:"Aceptar",handler:function(){U("")}}]})]})]})}),ln=(n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),function(){return Object(zt.jsx)(i.b,{children:Object(zt.jsx)(u.a,{children:Object(zt.jsxs)(i.D,{children:[Object(zt.jsx)(s.b,{exact:!0,path:"/home",children:Object(zt.jsx)(Pt,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/",children:Object(zt.jsx)(s.a,{to:"/home"})}),Object(zt.jsx)(s.b,{exact:!0,path:"/form-datos-toma.page",children:Object(zt.jsx)(Tt,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/captura-de-lectura.page",children:Object(zt.jsx)(Qt,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/historial-lecturas.page",children:Object(zt.jsx)(en,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/editar-lecturas-agua.page",children:Object(zt.jsx)(tn,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/datos-contribuyente.page",children:Object(zt.jsx)(cn,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/buscar-contrato",children:Object(zt.jsx)(on,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/realizar-corte",children:Object(zt.jsx)(sn,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/buscar-corte",children:Object(zt.jsx)(un,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/reportes.page",children:Object(zt.jsx)(nn,{})}),Object(zt.jsx)(s.b,{exact:!0,path:"/ContratosReportes",children:Object(zt.jsx)(an,{})})]})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var jn=function(e){e&&e instanceof Function&&n.e(58).then(n.bind(null,202)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(zt.jsx)(a.a.StrictMode,{children:Object(zt.jsx)(ln,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),jn()},92:function(e,t,n){var r={"./ion-action-sheet.entry.js":[142,5],"./ion-alert.entry.js":[143,6],"./ion-app_8.entry.js":[144,7],"./ion-avatar_3.entry.js":[145,17],"./ion-back-button.entry.js":[146,18],"./ion-backdrop.entry.js":[147,43],"./ion-button_2.entry.js":[148,19],"./ion-card_5.entry.js":[149,20],"./ion-checkbox.entry.js":[150,21],"./ion-chip.entry.js":[151,22],"./ion-col_3.entry.js":[152,44],"./ion-datetime_3.entry.js":[153,10],"./ion-fab_3.entry.js":[154,23],"./ion-img.entry.js":[155,45],"./ion-infinite-scroll_2.entry.js":[156,46],"./ion-input.entry.js":[157,24],"./ion-item-option_3.entry.js":[158,25],"./ion-item_8.entry.js":[159,26],"./ion-loading.entry.js":[160,27],"./ion-menu_3.entry.js":[161,28],"./ion-modal.entry.js":[162,8],"./ion-nav_2.entry.js":[163,14],"./ion-popover.entry.js":[164,9],"./ion-progress-bar.entry.js":[165,29],"./ion-radio_2.entry.js":[166,30],"./ion-range.entry.js":[167,31],"./ion-refresher_2.entry.js":[168,11],"./ion-reorder_2.entry.js":[169,16],"./ion-ripple-effect.entry.js":[170,47],"./ion-route_4.entry.js":[171,32],"./ion-searchbar.entry.js":[172,33],"./ion-segment_2.entry.js":[173,34],"./ion-select_3.entry.js":[174,35],"./ion-slide_2.entry.js":[175,48],"./ion-spinner.entry.js":[176,13],"./ion-split-pane.entry.js":[177,49],"./ion-tab-bar_2.entry.js":[178,36],"./ion-tab_2.entry.js":[179,15],"./ion-text.entry.js":[180,37],"./ion-textarea.entry.js":[181,38],"./ion-toast.entry.js":[182,39],"./ion-toggle.entry.js":[183,12],"./ion-virtual-scroll.entry.js":[184,50]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=92,e.exports=a},94:function(e,t,n){var r={"./ion-icon.entry.js":[185,57]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=94,e.exports=a}},[[139,3,4]]]);
//# sourceMappingURL=main.70da63c9.chunk.js.map